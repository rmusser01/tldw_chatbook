# Test Reports Directory

This directory contains test execution reports generated by the comprehensive test runner.

## Running Tests

From the project root, run:

```bash
# Run all tests with full reporting
python run_all_tests_with_report.py

# Run only unit tests
python run_all_tests_with_report.py -m unit

# Run only integration tests
python run_all_tests_with_report.py -m integration

# Run specific modules
python run_all_tests_with_report.py --modules Chat DB UI

# Run tests in parallel (4 workers)
python run_all_tests_with_report.py -n 4

# Generate specific report formats
python run_all_tests_with_report.py --format console json
python run_all_tests_with_report.py --format html markdown

# Verbose output
python run_all_tests_with_report.py -v

# Combine options
python run_all_tests_with_report.py -m unit integration --modules Chat DB -n 4 --format all
```

## Report Formats

The test runner can generate reports in multiple formats:

1. **Console Output** - Colored terminal output with summary tables
2. **JSON** - Detailed machine-readable format with all test data
3. **Markdown** - Documentation-friendly format with tables
4. **HTML** - Interactive web report with styling and progress bars

## Test Organization

Tests are organized by modules:

- **Core** - Core functionality and smoke tests
- **Chat** - Chat system tests
- **Character_Chat** - Character and persona management
- **Database** - All database-related tests (ChaChaNotesDB, Media_DB, etc.)
- **UI** - User interface and widget tests
- **RAG** - Retrieval-Augmented Generation tests
- **Notes** - Notes system tests
- **Event_Handlers** - Event handling tests
- **Evals** - Evaluation system tests
- **LLM_Management** - LLM management tests
- **Local_Ingestion** - File ingestion tests
- **Web_Scraping** - Web scraping tests
- **Utils** - Utility function tests
- **Chunking** - Text chunking tests
- **TTS** - Text-to-speech tests
- **API** - API endpoint tests

## Test Markers

Available test markers (from pytest.ini):

- `smoke` - Critical path tests
- `unit` - Fast, isolated unit tests
- `integration` - Tests requiring external resources
- `e2e` - End-to-end feature tests
- `slow` - Tests taking more than 5 seconds
- `optional_deps` - Tests requiring optional dependencies
- `asyncio` - Asynchronous tests
- `timeout` - Tests with custom timeouts
- `ui` - UI component tests
- `compatibility` - Legacy API compatibility tests
- `performance` - Performance benchmarks
- `property` - Property-based tests
- `requires_rag_deps` - Tests requiring RAG dependencies
- `requires_chromadb` - Tests requiring ChromaDB

## Report Files

Generated reports are named with timestamps:

- `test_report_YYYYMMDD_HHMMSS.json` - JSON report
- `test_report_YYYYMMDD_HHMMSS.md` - Markdown report
- `test_report_YYYYMMDD_HHMMSS.html` - HTML report

## Interpreting Results

Each report includes:

1. **Overall Summary** - Total tests, pass/fail counts, success rate
2. **Module Breakdown** - Results grouped by module
3. **Failed Tests** - Details of any test failures
4. **Timing Information** - Duration for each module and total

### Success Rate Calculation

- Success Rate = (Passed Tests / Total Tests) Ã— 100
- A module is considered passing if all its tests pass
- Skipped tests don't count as failures

## Tips

1. Run smoke tests first for quick validation:
   ```bash
   python run_all_tests_with_report.py -m smoke
   ```

2. Use parallel execution for faster results:
   ```bash
   python run_all_tests_with_report.py -n auto
   ```

3. Focus on specific modules during development:
   ```bash
   python run_all_tests_with_report.py --modules Chat --format console
   ```

4. Generate HTML reports for sharing:
   ```bash
   python run_all_tests_with_report.py --format html
   ```

## Troubleshooting

- If tests fail to discover, check that you're running from the project root
- For import errors, ensure the virtual environment is activated
- For parallel execution issues, try reducing worker count or disable with `-n 1`
- Check individual module JSON files (e.g., `Chat_report.json`) for detailed errors