[pytest]
# Test discovery
testpaths = Tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Add src to Python path for imports
pythonpath = .

# Markers for test categorization
markers =
    unit: Unit tests - fast, isolated tests
    integration: Integration tests - tests that interact with databases/files
    e2e: End-to-end tests - full feature tests
    slow: Tests that take more than 5 seconds
    optional_deps: Tests that require optional dependencies
    asyncio: Async tests (automatically added by pytest-asyncio)
    timeout: Tests with custom timeout values
    ui: UI tests - tests for Textual widgets and UI components
    compatibility: Compatibility tests for legacy APIs
    performance: Performance and benchmarking tests
    property: Property-based tests using Hypothesis
    requires_rag_deps: Tests that require RAG dependencies (ChromaDB, sentence-transformers, etc.)
    requires_chromadb: Tests that specifically require ChromaDB
    
# Default options
addopts = 
    --strict-markers
    -ra
    --tb=short
    --asyncio-mode=strict
    
# Ignore certain paths
norecursedirs = .git .venv dist build *.egg

# Timeout settings (requires pytest-timeout)
timeout = 300
timeout_method = thread

# Coverage settings (if using pytest-cov)
[coverage:run]
source = tldw_chatbook
omit = 
    */tests/*
    */test_*
    */__pycache__/*
    .venv/*