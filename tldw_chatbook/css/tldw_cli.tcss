Screen { layout: vertical; }
Header { dock: top; height: 1; background: $accent-darken-1; }
Footer { dock: bottom; height: 1; background: $accent-darken-1; }
#tabs { dock: top; height: 3; background: $background; padding: 0 1; }
#tabs Button { width: 1fr; height: 100%; border: none; background: $panel; color: $text-muted; }
#tabs Button:hover { background: $panel-lighten-1; color: $text; }
#tabs Button.-active { background: $accent; color: $text; text-style: bold; border: none; }
#content { height: 1fr; width: 100%; }

/* Base style for ALL windows. The watcher will set display: True/False */
.window {
    height: 100%;
    width: 100%;
    layout: horizontal; /* Or vertical if needed by default */
    overflow: hidden;
}

.placeholder-window { align: center middle; background: $panel; }

/* Sidebar Styling */
/* Generic .sidebar (used by #chat-left-sidebar and potentially others) */
.sidebar {
    dock: left;
    width: 25%; /* <-- CHANGE to percentage (adjust 20% to 35% as needed) */
    min-width: 20; /* <-- ADD a minimum width to prevent it becoming unusable */
    max-width: 80; /* <-- ADD a maximum width (optional) */
    background: $boost;
    padding: 1 2;
    border-right: thick $background-darken-1;
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
}
/* Collapsed state for the existing left sidebar */
.sidebar.collapsed {
    width: 0 !important;
    min-width: 0 !important; /* Ensure min-width is also 0 */
    border-right: none !important;
    padding: 0 !important;
    overflow: hidden !important;
    display: none; /* ensures it doesn’t grab focus */
}

/* Right sidebar (chat-right-sidebar) */
#chat-right-sidebar {
    dock: right;
    width: 25%;  /* Default width, will be dynamically updated */
    min-width: 15%; /* Minimum width - absolute units work better */
    max-width: 50%; /* Maximum width */
    background: $boost;
    padding: 1 2;
    border-left: thick $background-darken-1; /* Border on the left */
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
}

/* Collapsed state for the new right sidebar */
#chat-right-sidebar.collapsed {
    width: 0 !important;
    min-width: 0 !important; /* Ensure min-width is also 0 */
    border-left: none !important;
    padding: 0 !important;
    overflow: hidden !important;
    display: none; /* Ensures it doesn't take space or grab focus */
}

/* Common sidebar elements */
.sidebar-title { text-style: bold underline; margin-bottom: 1; width: 100%; text-align: center; }

/* Sidebar header with resize controls */
.sidebar-header-with-resize {
    height: 2;
    align: left middle;
    margin-bottom: 1;
}

.sidebar-header-with-resize .flex-grow {
    width: 1fr;
}

/* Sidebar resize buttons */
.sidebar-resize-button {
    width: 3;
    min-width: 3;
    height: 2;
    padding: 0;
    margin: 0 1;
}
.sidebar-label { margin-top: 1; text-style: bold; }
.sidebar-input { width: 100%; margin-bottom: 1; }
.sidebar-textarea { width: 100%; border: round $surface; margin-bottom: 1; }

/* Notes content header and expand button */
.notes-content-header {
    height: 2;
    align: left middle;
    margin-bottom: 0;
}

.notes-content-label {
    width: auto;
}

.notes-expand-button {
    width: auto;
    min-width: 8;
    height: 2;
    margin-left: 1;
    padding: 0 1;
}

/* Notes textarea states */
.notes-textarea-normal {
    height: 10;
}

.notes-textarea-expanded {
    height: 25;
    border: round $accent;
}
.sidebar Select { 
    width: 100%; 
    margin-bottom: 1; 
    border: round $primary-lighten-2;
}

.prompt-display-textarea {
    height: 7; /* Example height */
    border: round $primary-lighten-2;
    background: $primary-background;
}

.sidebar-listview {
    height: 10; /* Example height for listviews in sidebars */
    border: round $primary-lighten-2;
    background: $primary-background;
}
/* --- End of Sidebar Styling --- */
/* ----------------------------- ************************* ----------------------------- */



/* ----------------------------- ************************* ----------------------------- */
/* --- Chat Window specific layouts --- */
#chat-main-content {
    layout: vertical;
    height: 100%;
    width: 1fr; /* This is KEY - it takes up the remaining horizontal space */
}
/* VerticalScroll for chat messages */
#chat-log {
    height: 1fr; /* Takes remaining space */
    width: 100%;
    /* border: round $surface; Optional: Add border to scroll area */
    padding: 0 1; /* Padding around messages */
}

/* Input area styling (shared by chat and character) */
#chat-input-area, #conv-char-input-area { /* Updated from #character-input-area */
    height: auto;    /* Allow height to adjust */
    max-height: 12;  /* Limit growth */
    width: 100%;
    align: left top; /* Align children to top-left */
    padding: 1; /* Consistent padding */
    border-top: round $surface;
}
/* Input widget styling (shared) */
.chat-input { /* Targets TextArea */
    width: 1fr;
    height: auto;      /* Allow height to adjust */
    max-height: 100%;  /* Don't overflow parent */
    margin-right: 1; /* Space before button */
    border: round $surface;
}

/* Send button styling (shared) */
.send-button { /* Targets Button */
    width: 2;
    height: 3; /* Fixed height for consistency */
    /* align-self: stretch; REMOVED */
    margin-top: 0;
    padding: 0; /* No padding for button */
}

.stop-button {
    width: 2;
    height: 3;
    margin-top: 0;
}

/* Save Chat Button in chat-right-sidebar in Chat Tab */
.save-chat-button { /* Class used in character_sidebar.py */
    margin-top: 2;   /* Add 1 cell/unit of space above the button */
    /*width: 100%;      Optional: make it full width like other sidebar buttons */
}

/* chat-right-sidebar Specific Styles */
#chat-right-sidebar #chat-conversation-title-input { /* Title input */
    /* width: 100%; (from .sidebar-input) */
    /* margin-bottom: 1; (from .sidebar-input) */
}

#chat-right-sidebar .chat-keywords-textarea { /* Keywords TextArea specific class */
    height: 4;  /* Or 3 to 5, adjust as preferred */
    /* width: 100%; (from .sidebar-textarea) */
    /* border: round $surface; (from .sidebar-textarea) */
    /* margin-bottom: 1; (from .sidebar-textarea) */
}

/* Styling for the new "Save Details" button */
#chat-right-sidebar .save-details-button {
    margin-top: 1; /* Space above this button */
    /* width: 100%;    Make it full width */
}

/* Ensure the Save Current Chat button also has clear styling if needed */
#chat-right-sidebar .save-chat-button {
    margin-top: 1; /* Ensure it has some space if it's after keywords */
    /* width: 100%; */
}

/* Chat Sidebar - Prompts Section */
#chat-prompts-collapsible Input,
#chat-prompts-collapsible ListView,
#chat-prompts-collapsible Button {
    margin-bottom: 1; /* Consistent spacing */
}
#chat-prompt-list-view { /* ID for the prompt list in chat sidebar */
    height: 8; /* Adjust as needed */
    border: round $surface;
    margin-bottom: 1;
}
.loaded-prompt-area { /* Container for loaded prompt details in chat sidebar */
    margin-top: 1;
    padding: 0 1;        /* Padding for content inside */
    background: $surface; /* Slightly different background to group elements */
    /* To get rounded corners for the area itself, apply a border style */
    border: round $primary-background-lighten-1; /* Example: round border with a light color */
                                               /* Or use 'round $surface' if you want it less distinct */
                                               /* Or 'none' if you only want background and no explicit border */
}
/* End of Character Sidebar Specific Styles */

/* --- End of Chat Window specific layouts --- */
/* ----------------------------- ************************* ----------------------------- */



/* --- Conversations, Characters & Prompts Window specific layouts (previously Character Chat) --- */
/* Main container for the three-pane layout */
#conversations_characters_prompts-window {
    layout: horizontal; /* Crucial for side-by-side panes */
    /* Ensure it takes full height if not already by .window */
    height: 100%;
}

/* Left Pane Styling */
.cc-left-pane {
    width: 25%; /* Keep 25% or 30% - adjust as needed */
    min-width: 20; /* ADD a minimum width */
    height: 100%;
    background: $boost;
    padding: 1;
    border-right: thick $background-darken-1;
    overflow-y: auto;
    overflow-x: hidden;
}

/* Center Pane Styling */
.cc-center-pane {
    width: 1fr; /* Takes remaining space */
    height: 100%;
    padding: 1;
    overflow-y: auto; /* For conversation history */
}


/* Right Pane Styling */
.cc-right-pane {
    width: 25%; /* Keep 25% or 30% - adjust as needed */
    min-width: 20; /* ADD a minimum width */
    height: 100%;
    background: $boost;
    padding: 1;
    border-left: thick $background-darken-1;
    overflow-y: auto;
    overflow-x: hidden;
}

/* General styles for elements within these panes (can reuse/adapt from .sidebar styles) */
.cc-left-pane Input, .cc-right-pane Input {
    width: 100%; margin-bottom: 1;
}
.cc-left-pane ListView {
    height: 1fr; /* Make ListView take available space */
    margin-bottom: 1;
    border: round $surface;
}
.cc-left-pane Button, .cc-right-pane Button { /* Typo in original was .cc-right_pane */
    width: 100%;
    margin-bottom: 1;
}

/* Ensure Select widgets in left and right panes also get full width */
.cc-left-pane Select, .cc-right-pane Select {
    width: 100%;
    margin-bottom: 1;
}

/* Specific title style for panes */
.pane-title {
    text-style: bold;
    margin-bottom: 1;
    text-align: center;
    width: 100%; /* Ensure it spans width for centering */
}

/* Specific style for keywords TextArea in the right pane */
.conv-char-keywords-textarea {
    height: 5; /* Example height */
    width: 100%;
    margin-bottom: 1;
    border: round $surface; /* Re-apply border if not inherited */
}

/* Specific style for the "Export Options" label */
.export-label {
    margin-top: 2; /* Add some space above export options */
}

/* Old styles for #conv-char-main-content, #conv-char-top-area etc. are removed */
/* as the structure within #conversations_characters_prompts-window is now different. */
/* Portrait styling - if still needed, would be part of a specific pane's content now */
/* #conv-char-portrait {
    width: 25;
    height: 100%;
    border: round $surface;
    padding: 1;
    margin: 0;
    overflow: hidden;
    align: center top;
}

/* ADD THIS: Collapsed state for the CCP tab's right pane */
.cc-right-pane.collapsed {
    width: 0 !important;
    min-width: 0 !important;
    border-left: none !important;
    padding: 0 !important;
    overflow: hidden !important;
    display: none !important; /* Ensures it doesn't take space or grab focus */
}

/* Styles for the dynamic view areas within the CCP center pane */
.ccp-view-area {
    width: 100%;
    height: auto; /* Allow height to be determined by content */
    /* overflow: auto; /* If content within might overflow */
    overflow: auto;
}

/* Add this class to hide elements */
.ccp-view-area.hidden,
.ccp-right-pane-section.hidden { /* For sections in the right pane */
    display: none !important;
}

/* By default, let conversation messages be visible, and editor hidden */
#ccp-conversation-messages-view {
    /* display: block; /* or whatever its natural display is, usually block for Container */
}
#ccp-prompt-editor-view {
    display: none; /* Initially hidden by CSS */
}

#ccp-character-card-view {
    display: none; /* Initially hidden, to be shown by Python logic */
}

#ccp-character-editor-view {
    display: none; /* Initially hidden */
    layout: vertical; /* Important for stacking the scroller and button bar */
    width: 100%;
    height: 100%; /* Fill the .cc-center-pane */
}

/* Ensure the right pane sections also respect hidden class */
#ccp-right-pane-llm-settings-container {
    /* display: block; default */
}
#ccp-right-pane-llm-settings-container.hidden {
    display: none !important;
}

/* Collapsible Sidebar Toggle Button For Character/Conversation Editing Page */
.cc-sidebar-toggle-button { /* Applied to the "☰" button */
    width: 5; /* Adjust width as needed */
    height: 100%; /* Match parent Horizontal height, or set fixed e.g., 1 or 3 */
    min-width: 0; /* Override other button styles if necessary */
    border: none; /* Style as you like, e.g., remove border */
    background: $surface-darken-1; /* Example background */
    color: $text;
}
.cc-sidebar-toggle-button:hover {
    background: $surface;
}
/* End of Collapsible Sidebar Toggle Button for character/conversation editing */

/* --- Prompts Sidebar Vertical --- */
.ccp-prompt-textarea { /* Specific class for prompt textareas if needed */
    height: 20; /* Example height - Increased from 10 */
    /* width: 100%; (from .sidebar-textarea) */
    /* margin-bottom: 1; (from .sidebar-textarea) */
}

#ccp-prompts-listview { /* ID for the prompt list */
    height: 10; /* Or 1fr if it's the main element in its collapsible */
    border: round $surface;
    margin-bottom: 1;
}
.ccp-card-action-buttons {
    height: auto; /* Let it size to content */
    width: 100%;
    margin-top: 1; /* Space above buttons */
    margin-bottom: 2; /* Extra space below to ensure buttons are visible */
}
.ccp-prompt-action-buttons {
    margin-top: 1; /* Add space above the button bar */
    height: auto; /* Allow container height to fit buttons */
    width: 100%; /* Full width for the button bar */
    /* padding-bottom: 1; Removed, parent #ccp-character-editor-view now handles this */
}

.ccp-prompt-action-buttons Button {
    width: 1fr; /* Make buttons share space */
    margin: 0 1 0 0; /* Small right margin for all but last */
    height: auto; /* Let button height fit its content (typically 1 line) */
}
.ccp-prompt-action-buttons Button:last-of-type { /* Corrected pseudo-class */
    margin-right: 0;
}

/* Ensure Collapsible titles are clear */
#conv-char-right-pane Collapsible > .collapsible--header {
    background: $primary-background-darken-1; /* Example to differentiate */
    color: $text;
}

#conv-char-right-pane Collapsible.-active > .collapsible--header { /* Optional: when expanded */
    background: $primary-background;
}

/* TextAreas for Character Card Display */
.ccp-card-textarea {
    height: 15;
    width: 100%;
    margin-bottom: 1;
    border: round $surface; /* Ensuring consistent styling */
}

/* --- End of Prompts Sidebar Vertical --- */

/* AI Generation Buttons for Character Editor */
.field-with-ai-button {
    layout: horizontal;
    height: auto;
    width: 100%;
    margin-bottom: 1;
}

.field-with-ai-button TextArea {
    width: 80%;
    margin-right: 1;
}

.ai-generate-button {
    width: 18%;
    height: 3;
    margin-top: 0;
}

.ai-generate-all-button {
    width: 100%;
    height: 3;
    margin-bottom: 1;
    margin-top: 1;
}

/* --- End of Conversations, Characters & Prompts Window specific layouts --- */
/* ----------------------------- ************************* ----------------------------- */



/* ----------------------------- ************************* ----------------------------- */
/* --- Logs Window --- */
/* Logs Window adjustments */
#logs-window {
    layout: vertical; /* Override .window's default horizontal layout for this specific window */
    /* The rest of your #logs-window styles (padding, border, height, width) are fine */
    /* E.g., if you had: padding: 0; border: none; height: 100%; width: 100%; those are okay. */
}
#app-log-display {
    border: none;
    height: 1fr;    /* RichLog takes most of the vertical space */
    width: 100%;    /* RichLog takes full width in the vertical layout */
    margin: 0;
    padding: 1;     /* Your existing padding is good */
}

/* Style for the new "Copy All Logs" button */
.logs-action-button {
    width: 100%;     /* Button takes full width */
    height: 3;       /* A standard button height */
    margin-top: 1;   /* Add some space between RichLog and the button */
    /* dock: bottom; /* Optional: If you want it always pinned to the very bottom.
                       If omitted, it will just flow after the RichLog in the vertical layout.
                       For simplicity, let's omit it for now. */
}
/* old #logs-window { padding: 0; border: none; height: 100%; width: 100%; }
#app-log-display { border: none; height: 1fr; width: 1fr; margin: 0; padding: 1; }
*/
/* --- End of Logs Window --- */
/* ----------------------------- ************************* ----------------------------- */



/* ----------------------------- ************************* ----------------------------- */
/* --- ChatMessage Styling --- */
ChatMessage {
    width: 100%;
    height: auto;
    margin-bottom: 1;
}
ChatMessage > Vertical {
    border: round $surface;
    background: $panel;
    padding: 0 1;
    width: 100%;
    height: auto;
}
ChatMessage.-user > Vertical {
    background: $boost; /* Different background for user */
    border: round $accent;
}
.message-header {
    width: 100%;
    padding: 0 1;
    background: $surface-darken-1;
    text-style: bold;
    height: 1; /* Ensure header is minimal height */
}
.message-text {
    padding: 1; /* Padding around the text itself */
    width: 100%;
    height: auto;
}
.message-actions {
    height: auto;
    width: 100%;
    padding: 1; /* Add padding around buttons */
    /* Use a VALID border type */
    border-top: solid $surface-lighten-1; /* CHANGED thin to solid */
    align: right middle; /* Align buttons to the right */
    display: block; /* Default display state */
}
.message-actions Button {
    min-width: 8;
    height: 1;
    margin: 0 0 0 1; /* Space between buttons */
    border: none;
    background: $surface-lighten-2;
    color: $text-muted;
}
.message-actions Button:hover {
    background: $surface;
    color: $text;
}
/* Initially hide AI actions until generation is complete */
ChatMessage.-ai .message-actions.-generating {
    display: none;
}
/* microphone button – same box as Send but subdued colour */
.mic-button {
    width: 1;
    height: 3;
    margin-right: 1;           /* gap before Send */
    border: none;
    background: $surface-darken-1;
    color: $text-muted;
}
.mic-button:hover {
    background: $surface;
    color: $text;
}
.sidebar-toggle {
    width: 2;                /* tiny square */
    height: 3;
    /* margin-right: 1; Removed default margin, apply specific below */
    border: none;
    background: $surface-darken-1;
    color: $text;
}
.sidebar-toggle:hover { background: $surface; }

/* Specific margins for sidebar toggles based on position */
#toggle-chat-left-sidebar {
    margin-right: 1; /* Original toggle on the left of input area */
}

#toggle-chat-right-sidebar {
    margin-left: 1; /* New toggle on the right of input area */
}

#app-titlebar {
    dock: top;
    height: 1;                 /* single line */
    background: $accent;       /* or any colour */
    color: $text;
    text-align: center;
    text-style: bold;
    padding: 0 1;
}

/* Reduce height of Collapsible headers */
Collapsible > .collapsible--header {
    height: 2;
}

/* Half height for RAG Settings collapsible header */
#chat-rag-panel > .collapsible--header,
#character-rag-panel > .collapsible--header {
    height: 1;
}

.chat-system-prompt-styling {
    width: 100%;
    height: auto;
    min-height: 3;
    max-height: 10; /* Limit height */
    border: round $surface;
    margin-bottom: 1;
}
/* ----------------------------- ************************* ----------------------------- */



/* ----------------------------- ************************* ----------------------------- */
/* --- Notes Tab Window --- */
/* (Assuming #notes-window has layout: horizontal; by default from .window or is set in Python) */

#notes-main-content { /* Parent of the editor and controls */
    layout: vertical; /* This is what I inferred based on your Python structure */
    width: 1fr;       /* Takes space between sidebars */
    height: 100%;
}

.notes-editor { /* Targets your #notes-editor-area by class */
    width: 100%;
    height: 1fr; /* This makes it take available vertical space */
}

#notes-controls-area { /* The container for buttons below the editor */
    height: auto;
    width: 100%;
    padding: 1;
    border-top: round $surface;
    align: center middle; /* Aligns buttons horizontally if Horizontal container */
                           /* If this itself is a Vertical container, this might not do much */
}
/* --- End of Notes Tab Window --- */
/* ----------------------------- ************************* ----------------------------- */



/* ----------------------------- ************************* ----------------------------- */
/* --- Metrics Screen Styling --- */
MetricsScreen {
    padding: 1 2; /* Add some padding around the screen content */
    /* layout: vertical; /* MetricsScreen is a Static, VerticalScroll handles layout */
    /* align: center top; /* If needed, but VerticalScroll might handle this */
}

#metrics-container {
    padding: 1;
    /* border: round $primary-lighten-2; /* Optional: a subtle border */
    /* background: $surface; /* Optional: a slightly different background */
}

/* Styling for individual metric labels within MetricsScreen */
MetricsScreen Label {
    width: 100%;
    margin-bottom: 1; /* Space between metric items */
    padding: 1;       /* Padding inside each label's box */
    background: $panel-lighten-1; /* A slightly lighter background for each item */
    border: round $primary-darken-1; /* Border for each item */
    /* Textual CSS doesn't allow direct styling of parts of a Label's text (like key vs value) */
    /* The Python code uses [b] for keys, which Rich Text handles. */
}

/* Style for the title label: "Application Metrics" */
/* This targets the first Label directly inside the VerticalScroll with ID metrics-container */
#metrics-container > Label:first-of-type {
    text-style: bold underline;
    align: center middle;
    padding: 1 0 2 0; /* More padding below the title */
    background: transparent; /* No specific background for the title itself */
    border: none; /* No border for the title itself */
    margin-bottom: 2; /* Extra space after the title */
}

/* Style for error messages within MetricsScreen */
/* These require the Python code to add the respective class to the Label widget */
MetricsScreen Label.-error-message {
    color: $error; /* Text color for errors */
    background: $error 20%; /* Background for error messages, e.g., light red. USES $error WITH 20% ALPHA */
    /* border: round $error; /* Optional: border for error messages */
    text-style: bold;
}

/* Style for info messages (e.g. "file empty") within MetricsScreen */
MetricsScreen Label.-info-message {
    color: $text-muted; /* Or another color that indicates information */
    background: $panel; /* A more subdued background, or $transparent */
    /* border: round $primary-lighten-1; /* Optional: border for info messages */
    text-style: italic;
}
/* --- End of Metrics Screen Styling --- */
/* ----------------------------- ************************* ----------------------------- */



/* ----------------------------- ************************* ----------------------------- */
/* --- Tools & Settings Tab --- */
#tools_settings-window { /* Matches TAB_TOOLS_SETTINGS */
    layout: horizontal; /* Main layout for this tab */
}

.tools-nav-pane {
    dock: left;
    width: 25%; /* Adjust as needed */
    min-width: 25; /* Example min-width */
    max-width: 60; /* Example max-width */
    height: 100%;
    background: $boost; /* Or $surface-lighten-1 */
    padding: 1;
    border-right: thick $background-darken-1;
    overflow-y: auto;
    overflow-x: hidden;
}

.tools-nav-pane .ts-nav-button { /* Style for navigation buttons */
    width: 100%;
    margin-bottom: 1;
    border: none; /* Cleaner look for nav buttons */
    height: 3;
}
.tools-nav-pane .ts-nav-button:hover {
    background: $accent 50%;
}

.tools-nav-pane .ts-nav-button.active-nav {
    background: $accent;
    color: $text;
    text-style: bold;
}

.tools-content-pane {
    width: 1fr; /* Takes remaining horizontal space */
    height: 100%;
    padding: 1 2; /* Padding for the content area */
    overflow-y: auto; /* If content within sub-views might scroll */
}

.ts-view-area { /* Class for individual content areas */
    width: 100%;
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
    display: none; /* Hidden by default */
}

.ts-view-area.active {
    display: block; /* Show when active */
}

/* Container height fixes */
.general-settings-container {
    height: 100%;
    width: 100%;
    overflow-y: auto;
    overflow-x: hidden;
}

.config-file-settings-container {
    height: 100%;
    width: 100%;
    overflow-y: auto;
    overflow-x: hidden;
}

/* Settings form styling */
.section-title {
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
    text-align: center;
}

.section-description {
    color: $text-muted;
    margin-bottom: 2;
    text-align: center;
    text-style: italic;
}

.subsection-title {
    text-style: bold;
    color: $secondary;
    margin: 2 0 1 0;
}

.settings-group {
    margin-bottom: 2;
    padding: 1;
    background: $surface;
    border: round $primary-background;
    height: auto;
}

.settings-label {
    margin-bottom: 1;
    text-style: bold;
}

.settings-select, .settings-input {
    width: 100%;
    margin-bottom: 1;
    min-height: 3;
    height: auto;
}

.checkbox-group {
    margin-bottom: 1;
}

.warning-text {
    color: $warning;
    margin-bottom: 1;
    text-style: italic;
}

.settings-actions {
    margin-top: 2;
    layout: horizontal;
    height: auto;
    align: center middle;
}

.settings-actions Button {
    margin: 0 1 0 0;
}

/* Configuration file settings specific */
.config-file-settings-container {
    height: 100%;
    width: 100%;
}

.config-editor {
    height: 1fr;
    border: round $primary;
    background: $panel;
    margin-bottom: 1;
}

.config-button-container {
    layout: horizontal;
    height: auto;
    margin-top: 1;
    align: center middle;
}

.config-button-container Button {
    margin: 0 1 0 0;
}

.tab-description {
    color: $text-muted;
    margin-bottom: 1;
    text-style: italic;
}

/* Form-based config sections */
.config-form {
    height: 100%;
    width: 100%;
    padding: 1;
    overflow-y: auto;
    overflow-x: hidden;
}

.form-label {
    margin-bottom: 1;
    text-style: bold;
}

.form-section-title {
    text-style: bold;
    color: $secondary;
    margin: 2 0 1 0;
    border-bottom: solid $primary-background;
    padding-bottom: 1;
}

.form-description {
    color: $text-muted;
    margin-bottom: 2;
    text-style: italic;
}

.form-actions {
    margin-top: 2;
    layout: horizontal;
    height: auto;
    align: center middle;
}

.form-actions Button {
    margin: 0 1 0 0;
}

.provider-models-textarea {
    height: 5;
    margin-bottom: 1;
}

/* TabbedContent height fixes */
#config-tabs {
    height: 100%;
    width: 100%;
}

#config-tabs TabPane {
    height: 100%;
    width: 100%;
    padding: 1;
}

/* Container for the HorizontalScroll, this takes the original #tabs styling for docking */
#tabs-outer-container {
    dock: top;
    height: 3; /* Or your desired tab bar height */
    background: $background; /* Or your tab bar background */
    padding: 0 1; /* Padding for the overall bar */
    width: 100%;
}

/* The HorizontalScroll itself, which will contain the buttons */
#tabs {
    width: 100%;
    height: 100%; /* Fill the outer container's height */
    overflow-x: auto !important; /* Ensure horizontal scrolling is enabled */
    /* overflow-y: hidden; /* Usually not needed for a single row of tabs */
}

#tabs Button {
    width: auto;         /* Let button width be determined by content + padding */
    min-width: 10;       /* Minimum width to prevent squishing too much */
    height: 100%;        /* Fill the height of the scrollable area */
    border: none; /* Your existing style */
    background: $panel;  /* Your existing style */
    color: $text-muted;  /* Your existing style */
    padding: 0 2;        /* Add horizontal padding to buttons */
    margin: 0 1 0 0;     /* Small right margin between buttons */
}

#tabs Button:last-of-type { /* No margin for the last button */
    margin-right: 0;
}

#tabs Button:hover {
    background: $panel-lighten-1; /* Your existing style */
    color: $text;                 /* Your existing style */
}

#tabs Button.-active {
    background: $accent;          /* Your existing style */
    color: $text;                 /* Your existing style */
    text-style: bold;             /* Your existing style */
    /* border: none; /* Already set */
}

/* --- Ingest Content Tab --- */
#ingest-window { /* Matches TAB_INGEST */
    layout: horizontal;
}
.tldw-api-media-specific-options { /* Common class for specific option blocks */
    padding: 1;
    border: round $surface;
    margin-top: 1;
    margin-bottom: 1;
}

/* Added to ensure initially hidden specific options are indeed hidden */
.tldw-api-media-specific-options.hidden {
     padding: 1;
     border: round $surface;
     margin-top: 1;
}

.ingest-nav-pane { /* Style for the left navigation pane */
    dock: left;
    width: 25%;
    min-width: 25;
    max-width: 60;
    height: 100%;
    background: $boost; /* Or a slightly different shade */
    padding: 1;
    border-right: thick $background-darken-1;
    overflow-y: auto;
    overflow-x: hidden;
}

.ingest-nav-pane .ingest-nav-button { /* Style for navigation buttons */
    width: 100%;
    margin-bottom: 1;
    border: none;
    height: 3;
}
.ingest-nav-pane .ingest-nav-button:hover {
    background: $accent 60%; /* Slightly different hover potentially */
}
/* Active state for selected ingest nav button (optional) */
/* .ingest-nav-pane .ingest-nav-button.-active-view {
    background: $accent-darken-1;
    color: $text;
} */

.ingest-content-pane { /* Style for the right content display area */
    width: 1fr;
    height: 100%;
    padding: 1 2;
    overflow-y: auto;
}

.ingest-view-area { /* Common class for individual content areas */
    width: 100%;
    height: 100%; /* Or auto */
    /* Example content styling */
    /* align: center middle; */
    /* border: round $primary; */
    /* padding: 2; */
}
.ingest-label {
    margin-top: 1;
    margin-bottom: 0;
}
.ingest-selected-files-list {
    height: 5;
    border: round $primary;
    margin-bottom: 1;
    background: $surface;
}
.ingest-preview-area {
    height: 1fr;
    border: round $primary-lighten-2;
    padding: 1;
    margin-bottom: 1;
    background: $surface;
}
.ingest-preview-area > Static#ingest-prompts-preview-placeholder {
    color: $text-muted;
    width: 100%;
    text-align: center;
    padding: 2 0;
}
.ingest-status-area {
    height: 8;
    margin-top: 1;
}

.prompt-preview-item {
    border: panel $background-lighten-2;
    padding: 1;
    margin-bottom: 1;
}
.prompt-preview-item .prompt-title {
    text-style: bold;
}
.prompt-preview-item .prompt-field-label {
    text-style: italic;
    color: $text-muted;
}
.prompt-preview-item Markdown {
    background: $surface-darken-1;
    padding: 0 1;
    margin-top: 1;
    margin-bottom: 1;
    border: solid $primary-darken-1; /* Use 'solid' instead of 'narrow' */
    max-height: 10;
    overflow-y: auto;
}
.prompt-preview-item .prompt-details-text {
    max-height: 5;
    overflow-y: auto;
    background: $surface;
    padding: 0 1;
    border: dashed $primary-darken-2; /* Use 'dashed' instead of 'dotted' */
    margin-bottom: 1;
}
/* --- END OF INTEGRATED NEW CSS --- */

/* ----------------------------- ************************* ----------------------------- */
/* --- LLM Management Tab --- */
#llm_management-window { /* Matches TAB_LLM ("llm_management") */
    layout: horizontal;
}

.llm-nav-pane { /* Style for the left navigation pane */
    dock: left;
    width: 25%; /* Or your preferred width */
    min-width: 25;
    max-width: 60; /* Example */
    height: 100%;
    background: $boost; /* Or $surface-darken-1 or $surface-lighten-1 */
    padding: 1;
    border-right: thick $background-darken-1;
    overflow-y: auto;
    overflow-x: hidden;
}

.llm-nav-pane .llm-nav-button { /* Style for navigation buttons */
    width: 100%;
    margin-bottom: 1;
    border: none;
    height: 3;
}
.llm-nav-pane .llm-nav-button:hover {
    background: $accent 70%; /* Example hover */
}
/* Active state for selected llm nav button */
.llm-nav-pane .llm-nav-button.-active {
    background: $accent;
    color: $text;
}

.llm-content-pane { /* Style for the right content display area */
    width: 1fr;
    height: 100%;
    padding: 1 2;
    overflow-y: auto;
}

.llm-view-area { /* Common class for individual content areas */
    width: 100%;
    height: 100%; /* Or auto */
    display: none; /* Initially hidden until activated */
}


/* Chat Sidebar Prompts Section Specific Styles */
#chat-sidebar-prompts-collapsible { /* The collapsible container itself */
    /* Add any specific styling for the collapsible if needed */
}

#chat-sidebar-prompt-search-input,
#chat-sidebar-prompt-keyword-filter-input {
    margin-bottom: 1; /* Add some space below these inputs */
}

#chat-sidebar-prompts-listview {
    min-height: 5;
    max-height: 15;
    height: auto;
    overflow-y: auto;
    border: round $surface;
    margin-bottom: 1;
}

#chat-sidebar-prompt-system-display,
#chat-sidebar-prompt-user-display {
    min-height: 5;
    max-height: 15;
    height: auto;
    width: 100%; /* Ensure they take full width */
    margin-bottom: 1;
    border: round $surface; /* Standard border like other textareas */
    /* read_only is set in Python, CSS cannot enforce it but can style */
}

#chat-sidebar-copy-system-prompt-button,
#chat-sidebar-copy-user-prompt-button {
    width: 100%; /* Make copy buttons full width */
    margin-top: 0; /* Remove top margin if directly after TextArea */
    margin-bottom: 1; /* Space after copy buttons */
}
/*

/* LLM Management Tab Specific Styles */
#llm_management-window .llm-view-area > VerticalScroll { /* Target the new VS inside each view */
    height: 100%; /* Ensure the VerticalScroll takes full height of its parent view area */
}

#llamacpp-args-help-collapsible,
#llamafile-args-help-collapsible,
#vllm-args-help-collapsible { /* Style for the collapsible itself */
    margin-top: 1;
    margin-bottom: 1;
    border: round $primary-lighten-1; /* Optional border for the collapsible */
}

#llamacpp-args-help-collapsible > .collapsible--header,
#llamafile-args-help-collapsible > .collapsible--header,
#vllm-args-help-collapsible > .collapsible--header { /* Style for the collapsible title */
    background: $surface-darken-1; /* Slightly different background for the header */
}

.help-text-display {
    height: 25; /* Or your desired fixed height for the scrollable help text */
    width: 100%;
    border: round $surface;
    padding: 1;
    margin-top: 1; /* Space between collapsible title and the content */
    background: $panel; /* Background for the help text area */
    overflow-y: scroll !important; /* Ensure vertical scrolling */
}

/* Ensure input fields for additional args are appropriately sized if they were TextAreas */
/* If you changed #llamacpp-additional-args to Input, this might not be needed for it */
#llamacpp-additional-args, /* This is now an Input, so this rule might be less relevant for it */
#llamafile-additional-args,
#vllm-additional-args {
    height: 3; /* For single-line Input or small TextArea */
    /* If it's a TextArea and you want more lines: */
    /* min-height: 3; */
    /* max-height: 7; */
    /* height: auto; */
}

/* Log output styles for Llama.cpp and Llamafile views */
#llm-view-llama-cpp .log_output,
#llm-view-llamafile .log_output {
    width: 100%;
    height: 15; /* Fixed height to ensure scrolling works */
    min-height: 10;
    max-height: 20;
    border: panel $primary-darken-2;
    background: $background-darken-1;
    margin-top: 1;
    overflow-y: auto;
}

/* Optional: Style for the input_container if needed */
.input_container {
    layout: horizontal;
    height: auto;
    margin-bottom: 1;
}
.input_container Input {
    width: 1fr; /* Input takes available space */
    margin-right: 1; /* Space before browse button */
}
.input_container .browse_button {
    width: auto; /* Let button size itself */
    height: 100%;
}

.button_container {
    layout: horizontal;
    height: auto;
    margin-top: 1;
}
.button_container Button {
    margin-left: 1; /* Space between buttons */
}
/* Ollama Specific Styles within #llm-view-ollama */
#llm-view-ollama {
    layout: vertical; /* Ensures children stack vertically by default */
    /* overflow-y: auto; /* Add if direct children of llm-view-ollama might overflow before VerticalScroll */
}
#llm-view-ollama VerticalScroll { /* Ensure the VerticalScroll takes up space */
    height: 100%;
}

#llm-view-ollama .label { /* General label styling if not already covered */
    margin-top: 1;
    margin-bottom: 0; /* Tighten space below label if input is right after */
    text-style: bold;
}
#llm-view-ollama .section_label { /* For labels that act as section headers */
    margin-top: 2; /* More space above section labels */
    padding: 1 0;
    border: ascii $primary-background-lighten-1; /* Optional: add a border or background */
    text-align: center;
    width: 100%;
}

#llm-view-ollama .input_field,
#llm-view-ollama .input_field_short,
#llm-view-ollama .input_field_long {
    margin-bottom: 1; /* Space after input fields */
}
#llm-view-ollama .input_field_long { /* For paths or longer inputs */
    width: 100%;
}

#llm-view-ollama .input_action_container { /* For Input + Button on same line */
    layout: horizontal;
    height: auto; /* Fit content */
    margin-bottom: 0; /* Status/Output will provide margin */
}
#llm-view-ollama .input_action_container .input_field_short {
    width: 1fr; /* Input takes most space */
    margin-right: 1;
    margin-bottom: 0; /* No bottom margin if button is next to it */
}
#llm-view-ollama .input_action_container .action_button_short {
    width: auto; /* Let button size itself */
    min-width: 10; /* Ensure it's not too small */
    height: 100%; /* Match input height */
}
#llm-view-ollama .input_action_container .browse_button_short {
    width: auto;
    min-width: 15;
    height: 100%;
}


#llm-view-ollama .action_container { /* For standalone buttons */
    width: 100%;
    height: auto;
    margin-bottom: 0;
}
#llm-view-ollama .action_button { /* For buttons that take full width or are main actions */
    width: 100%;
    margin-top: 1; /* If it's after a section label or input */
}
#llm-view-ollama .full_width_button {
    width: 100%;
    margin-top: 1;
}


#llm-view-ollama .delete_button Button { /* Specific styling for delete button if needed */
    background: $error-darken-1;
    color: $text;
}
#llm-view-ollama .delete_button Button:hover {
    background: $error;
}

/* New Status TextArea */
.ollama-status-textarea {
    width: 100%;
    height: 3; /* Small, 1-2 lines of text */
    border: round $primary-darken-1;
    background: $surface;
    margin-top: 1; /* Space above status */
    margin-bottom: 1; /* Space below status, before main output or next section */
    padding: 0 1;
    color: $text-muted; /* Subdued text color for status */
}

/* Output TextAreas */
#llm-view-ollama .output_textarea_medium { /* For JSON lists, model info */
    width: 100%;
    height: 25; /* Or adjust as needed */
    border: round $primary;
    background: $panel;
    margin-bottom: 1; /* Space before next element/spacer */
}
#llm-view-ollama .output_textarea_small { /* For embeddings */
    width: 100%;
    height: 6;
    border: round $primary;
    background: $panel;
    margin-bottom: 1;
}

/* Main RichLog for streaming */
#llm-view-ollama .log_output_large { /* Renamed from .log_output for specificity */
    width: 100%;
    height: 10; /* Make it taller */
    border: panel $primary-darken-2;
    background: $background-darken-1; /* Darker background for log */
}

/* Spacer element */
.ollama-spacer {
    height: 1; /* Creates 1 cell of vertical space */
    width: 100%;
}

/* OLLAMA compact layout grid */
.ollama-button-bar {
    layout: horizontal;
    height: auto;
    width: 100%;
    margin: 1 0;
    align-horizontal: center;
}
.ollama-button-bar Button {
    width: 1fr;
    margin: 0 1;
}

.ollama-actions-grid {
    layout: horizontal;
    height: auto;
    align-vertical: top; /* Align columns to the top */
    margin-bottom: 1;
}

.ollama-actions-column {
    layout: vertical;
    width: 1fr;
    height: 100%; /* Make columns fill parent height */
    padding: 1;
    border: round $panel-lighten-1;
    margin: 0 1;
}
.ollama-actions-column:first-of-type {
    margin-left: 0;
}
.ollama-actions-column:last-of-type {
    margin-right: 0;
}

.column-title {
    text-style: bold underline;
    width: 100%;
    text-align: center;
    margin-bottom: 1;
}

/* Override input container margin inside a column */
.ollama-actions-column .input_action_container {
    margin-bottom: 1;
}
.ollama-actions-column .full_width_button {
    margin-top: 0; /* Tighten up space for buttons below inputs */
}


/* --- End of LLM Management Tab --- */
/* ----------------------------- ************************* ----------------------------- */



/* ----------------------------- ************************* ----------------------------- */
/* --- Media Tab --- */
#media-window {
    layout: horizontal;
    height: 100%;
}

.media-nav-pane {
    dock: left;
    width: 25%;
    min-width: 20;
    max-width: 50;
    height: 100%;
    background: $boost;
    padding: 1;
    border-right: thick $background-darken-1;
    overflow-y: auto;
    overflow-x: hidden;
}

.media-nav-pane.collapsed {
    width: 0 !important;
    min-width: 0 !important;
    border-right: none !important;
    padding: 0 !important;
    overflow: hidden !important;
    display: none !important;
}

.media-nav-pane .media-nav-button {
    width: 100%;
    margin-bottom: 1;
    border: none;
    height: 3;
}
.media-nav-pane .media-nav-button:hover {
    background: $accent 75%;
}

.media-content-pane {
    width: 1fr;
    height: 1fr;
    padding: 0;
    layout: vertical;
}

#media-content-pane > Button#media-sidebar-toggle-button {
    dock: top; /* Will be at the top of media-content-pane */
    height: 3;
    width: 5;
    margin: 0 0 1 1;
    /* Removed position:absolute, dock:top is better here */
}

.media-view-area {
    width: 100%;
    height: 1fr; /* Use 1fr to take all available space */
    layout: horizontal;
    /* border: 1px solid red; /* For debugging */
}

/* Target ListItems inside the media list to control their height */
.media-items-list > ListItem {
    height: auto; /* This prevents a single item from stretching to fill the whole ListView */
    padding: 1;
    margin-bottom: 1;
}

/* Styles for media item components */
.media-item-title {
    height: auto;
    text-style: bold;
}

.media-item-snippet {
    height: auto;
    color: $text-muted;
    max-height: 2;
    overflow-y: hidden;
}

.media-item-meta {
    height: auto;
    text-style: italic;
    color: $text-disabled;
}

/* Style for the Vertical container inside ListItems */
.media-items-list > ListItem > Vertical {
    height: auto;
    width: 100%;
}

.media-content-left-pane { /* This is the Vertical container */
    width: 35%;
    height: 1fr;          /* Use 1fr to properly fill the vertical space */
    layout: vertical;
    padding: 0 1 1 1;      /* Optional: Add some padding (Top, Right, Bottom, Left) */
}


/* Children of .media-content-left-pane */
.media-content-left-pane > Label.pane-title {
    height: auto; /* Or a fixed height like 2 or 3 if you prefer */
    width: 100%;
    text-align: center;
    margin-bottom: 1;
}
.media-content-left-pane > Input.media-search-input {
    height: 3; /* Fixed height for the input field */
    width: 100%;
    margin-bottom: 1;
}

/* ListView for media items */
.media-items-list {
    height: 1fr; /* Crucial: Make the ListView take all available vertical space */
    /* Add styles that were previously inherited from .sidebar-listview */
    border: round $primary-lighten-2;
    background: $primary-background;
    margin-bottom: 1; /* Add a little space before the pagination */
    overflow-y: auto; /* Enable vertical scrolling if needed */
    overflow-x: hidden; /* Hide horizontal overflow */
}

.media-pagination-bar { /* Container for pagination buttons */
    height: 3; /* Fixed height for the pagination bar */
    width: 100%;
    align-horizontal: center;
    /* padding: 1 0; /* Removed, height:3 should be enough */
}
.media-pagination-bar Button {
    width: auto;
    min-width: 10;
    margin: 0 1;
    height: 100%; /* Fill the pagination bar height */
}
.media-pagination-bar .media-page-label {
    width: 1fr;
    text-align: center;
    height: 100%; /* Fill the pagination bar height */
    padding: 0 1;
}

.media-content-right-pane { /* This is a VerticalScroll */
    width: 1fr;
    height: 1fr; /* Ensure it takes all available vertical space */
    padding: 1; /* Padding for the content area within the scroll view */
    /* border: 1px solid orange; /* For debugging */
    overflow-y: auto; /* Enable vertical scrolling when content exceeds height */
    layout: vertical; /* Ensure vertical layout for child elements */
}

.media-details-theme {
    height: 1fr; /* Use 1fr to take all available space within the scroll container */
    width: 100%; /* Explicitly set width to 100% too */
    overflow-y: auto !important;
    min-height: 0; /* Allow the content to shrink if needed and expand when there's space */
}

/* Force Markdown content in Media tab to expand fully */
.media-content-right-pane Markdown {
    height: 1fr !important;
    overflow-y: auto !important;
}

/* Additional override for any potential Textual default constraints */
VerticalScroll.media-content-right-pane {
    height: 1fr !important;
}

VerticalScroll.media-content-right-pane > Markdown {
    height: 1fr !important;
}

/* --- End of Media Tab --- */
/* ----------------------------- ************************* ----------------------------- */







/* ----------------------------- ************************* ----------------------------- */
/* --- Evals Tab --- */
#evals-window { /* Matches TAB_EVALS, .window class provides layout: horizontal */
    /* layout: horizontal; /* Provided by .window by default */
}

#evals-sidebar {
    dock: left;
    width: 25%;
    min-width: 20;
    max-width: 50; /* Adjusted max-width */
    height: 100%;
    background: $boost;
    padding: 1; /* Standard padding */
    border-right: thick $background-darken-1;
    overflow-y: auto;
    overflow-x: hidden;
}

#evals-sidebar.collapsed {
    width: 0 !important;
    min-width: 0 !important;
    border-right: none !important;
    padding: 0 !important;
    overflow: hidden !important;
    display: none !important; /* Ensure it's hidden */
}

/* Styles for the main content area within the Evals tab */
#evals-main-content-area {
    width: 1fr; /* Takes remaining horizontal space */
    height: 100%;
    padding: 1 2; /* Padding for the content area */
    /* border: round $primary; /* Optional: for visual debugging */
}

/* Styles for the sidebar toggle button in the Evals tab */
#toggle-evals-sidebar {
    /* Positioned by EvalsWindow's compose, next to the content area */
    /* dock: left; is set in EvalsWindow.py's DEFAULT_CSS for the button */
    width: auto; /* Small width, text will determine */
    height: 3;   /* Standard button height */
    min-width: 0; /* Allow it to be small */
    margin: 0 1 0 0; /* Top, Right, Bottom, Left margin - space it from main content */
    /* color: $text; */
    /* background: $surface-darken-1; */
    /* border: none; */
}
/* Hover state for the toggle button if needed, can inherit from general .sidebar-toggle if class is added */
/* #toggle-evals-sidebar:hover { background: $surface; } */

/* --- End Evals Tab (Old Implementation) --- */
/* ----------------------------- ************************* ----------------------------- */



/* ----------------------------- ************************* ----------------------------- */
/* --- Coding Tab --- */
#coding-window { /* Matches TAB_CODING */
    layout: horizontal; /* Main layout for this tab */
}

.coding-nav-pane {
    dock: left;
    width: 25%; /* Adjust as needed */
    min-width: 20; /* Example min-width */
    max-width: 50; /* Example max-width */
    height: 100%;
    background: $boost; /* Or a different background */
    padding: 1;
    border-right: thick $background-darken-1;
    overflow-y: auto;
    overflow-x: hidden;
}

.coding-nav-pane.collapsed {
    width: 0 !important;
    min-width: 0 !important;
    border-right: none !important;
    padding: 0 !important;
    overflow: hidden !important;
    display: none !important; /* Ensures it doesn't take space or grab focus */
}

.coding-nav-pane .coding-nav-button { /* Style for navigation buttons */
    width: 100%;
    margin-bottom: 1;
    border: none;
    height: 3;
}

.coding-nav-pane .coding-nav-button:hover {
    background: $accent 75%; /* Example hover, distinct from other navs */
}

.coding-content-pane {
    width: 1fr; /* Takes remaining horizontal space */
    height: 100%;
    padding: 1 2; /* Padding for the content area */
    overflow-y: auto; /* If content within sub-views might scroll */
}

.coding-view-area { /* Class for individual content areas in Coding tab */
    width: 100%;
    height: 100%; /* Or auto if content dictates height */
}
/* --- End of Coding Tab --- */
/* ----------------------------- ************************* ----------------------------- */



/* ----------------------------- ************************* ----------------------------- */
/* --- Evals Tab --- */
#evals-window { /* Matches TAB_EVALS */
    layout: horizontal; /* Main layout for this tab */
}

.evals-nav-pane {
    dock: left;
    width: 25%; /* Adjust as needed */
    min-width: 20; /* Example min-width */
    max-width: 50; /* Example max-width */
    height: 100%;
    background: $boost; /* Or a different background */
    padding: 1;
    border-right: thick $background-darken-1;
    overflow-y: auto;
    overflow-x: hidden;
}

.evals-nav-pane.collapsed {
    width: 0 !important;
    min-width: 0 !important;
    border-right: none !important;
    padding: 0 !important;
    overflow: hidden !important;
    display: none !important; /* Ensures it doesn't take space or grab focus */
}

.evals-nav-pane .evals-nav-button { /* Style for navigation buttons */
    width: 100%;
    margin-bottom: 1;
    border: none;
    height: 3;
}

.evals-nav-pane .evals-nav-button:hover {
    background: $accent 75%; /* Example hover, distinct from other navs */
}

.evals-content-pane {
    width: 1fr; /* Takes remaining horizontal space */
    height: 100%;
    padding: 1 2; /* Padding for the content area */
    overflow-y: auto; /* If content within sub-views might scroll */
}

.evals-view-area { /* Class for individual content areas in Evals tab */
    width: 100%;
    height: 100%; /* Or auto if content dictates height */
}
/* --- End of Evals Tab --- */
/* ----------------------------- ************************* ----------------------------- */



/* ----------------------------- ************************* ----------------------------- */
/* --- Media Tab Specific Options --- */
.ingest-form-scrollable {
    height: 1fr; /* Allow scrolling within the form area */
}

.ingest-textarea-small {
    height: auto;
    max-height: 10;
    overflow-y: hidden;
    margin-bottom: 1;
}
.ingest-textarea-medium {
    height: auto;
    max-height: 15;
    overflow-y: hidden;
    margin-bottom: 1;
}
.ingest-form-row {
    layout: horizontal;
    width: 100%;
    height: auto;
    margin-bottom: 1;
}
.title-author-row { /* New class for Title/Author row */
    layout: horizontal;
    width: 100%;
    height: auto;
    margin-bottom: 0 !important; /* Override existing margin */
}
.ingest-form-col {
    width: 1fr;
    padding: 0 1;
}
.ingest-form-col:first-of-type {
    padding-left: 0;
}
.ingest-form-col:last-of-type {
    padding-right: 0;
}

.ingest-submit-button {
    width: 100%;
    margin-top: 2;
}

.hidden {
    display: none;
}
.tldw-api-media-specific-options { /* Common class for specific option blocks */
    padding: 1;
    border: round $surface;
    margin-top: 1;
    margin-bottom: 1;
}

/* --- End of Media Tab Specific Options --- */
/* ----------------------------- ************************* ----------------------------- */



/* ----------------------------- ************************* ----------------------------- */
/* --- Conversations, Characters & Prompts Window specific layouts --- */
#send-chat {
    width: 12;
    min-width: 12 !important;
    max-width: 12vh !important; /* Using ch unit and important */
    /* height: 3; /* Already set by .send-button class, but can be reiterated if needed */
    /* margin-top: 0; /* Already set by .send-button class */
}

#stop-chat-generation {
    width: 6;
    min-width: 6 !important;
    max-width: 6vh !important; /* Using ch unit and important */
    margin: 0 1;
    /* height: 3; /* Already set by .stop-button class, but can be reiterated if needed */
    /* margin-top: 0; /* Already set by .stop-button class */
}

.suggest-button {
    width: 8;
    min-width: 8 !important;
    max-width: 8vh !important; /* Using ch unit and important */
    margin: 0 1;
}
/* --- End of Conversations, Characters & Prompts Window specific layouts --- */
/* ----------------------------- ************************* ----------------------------- */



/* ----------------------------- ************************* ----------------------------- */
/* --- LLM Management Tab --- */

.llm-view-area { /* Common class for individual content areas */
    width: 100%;
    height: 100%; /* Or auto */
    display: none; /* Initially hidden until activated */
}
/* --- End of LLM Management Tab --- */
/* ----------------------------- ************************* ----------------------------- */



/* ----------------------------- ************************* ----------------------------- */
/* --- Window Footer Widget --- */

AppFooterStatus {
    dock: bottom;
    height: 1;
    background: $primary-background-darken-1;
    width: 100%;
    layout: horizontal;
    overflow: hidden;
    padding: 0 1;
    /* Removed align: right middle; from parent, will control children individually */
}

#footer-key-palette {
    width: auto;
    padding: 0 1; /* Padding around each key binding */
    color: $text-muted;
    dock: left; /* Dock key bindings to the left */
    visibility: visible;
    display: initial;
}

#footer-key-quit {
    width: auto;
    padding: 0 1; /* Padding around each key binding */
    color: $text-muted;
    dock: left; /* Dock key bindings to the left */
}

#footer-spacer {
    width: 1fr; /* Takes up remaining space in the middle */
}

#footer-word-count {
    width: auto;
    padding: 0 1;
    color: $text-muted;
    display: block;
}

#footer-token-count {
    width: auto;
    padding: 0 1;
    color: $text-muted;
    display: block;
}

#internal-db-size-indicator { /* This is for the DB sizes */
    width: auto;
    /* content-align: right; Textual doesn't have content-align for Static directly */
    /* dock: right; Docking within Horizontal might be tricky, align on parent is better */
    color: $text-muted;
    dock: right; /* Dock DB sizes to the right */
    padding: 0 1; /* Add padding to the right of DB sizes as well */
    margin-left: 2; /* Add buffer before DB status */
}
/* --- End of Window Footer Widget --- */
/* ----------------------------- ************************* ----------------------------- */

/* ----------------------------- ************************* ----------------------------- */
/* --- Utility/Not-Tab Specific --- */

.disabled {
    /* Make the button semi-transparent. This is the most effective way
       to show it's inactive and works just like web CSS. */
    opacity: 0.6;

    /* To achieve a "grayscale" effect, we manually set the colors
       to be less vibrant, using Textual's design tokens for theming. */
    background: $panel-darken-2;
    color: $text-muted;

    /* You can also ensure the border is muted. */
    border: round $primary-darken-2;
}
/* --- End of Utility/Not-Tab Specific --- */
/* ----------------------------- ************************* ----------------------------- */

/* Chat Sidebar Media Search Section Specific Styles */
#chat-media-collapsible .sidebar-listview {
    min-height: 10;
    max-height: 35;
    height: 22;
    border: round $surface;
    margin-bottom: 1;
}

.pagination-controls {
    layout: horizontal;
    height: auto;
    width: 100%;
    align-horizontal: center;
    margin-bottom: 1;
}
.pagination-controls Button {
    width: 8;
    min-width: 0;
}
.pagination-controls Label {
    width: 1fr;
    text-align: center;
}

.detail-field-container {
    layout: horizontal;
    height: auto;
    align: center middle;
}
.detail-field-container .detail-label { width: 1fr; }
.detail-field-container .copy-button { width: auto; height: 1; border: none; }
.detail-textarea { height: auto; min-height: 4; max-height: 25; margin-bottom: 1; }
.detail-textarea.content-display { height: auto; min-height: 10; max-height: 40; margin-bottom: 1; }


/* ----------------------------- ************************* ----------------------------- */
/* --- Search Tab (RAG/Embeddings) --- */
#search-window { /* Matches TAB_SEARCH, .window class provides layout: horizontal */
    /* No explicit layout needed here if .window handles it */
}

.search-nav-pane { /* Style for the left navigation pane in Search Tab */
    dock: left;
    width: 25%;
    min-width: 25;
    max-width: 60;
    height: 100%;
    background: $boost;
    padding: 1;
    border-right: thick $background-darken-1;
    overflow-y: auto;
    overflow-x: hidden;
}

.search-nav-pane .search-nav-button { /* Style for navigation buttons in Search Tab */
    width: 100%;
    margin-bottom: 1;
    border: none;
    height: 3;
}
.search-nav-pane .search-nav-button:hover {
    background: $accent 80%; /* Example: accent color with 80% opacity */
}
/* Active state for selected search nav button */
.search-nav-pane .search-nav-button.-active-search-sub-view {
    background: $accent;
    color: $text;
    text-style: bold;
}
.search-content-pane { /* Style for the right content display area in Search Tab */
    width: 1fr;
    height: 100%;
    padding: 1 2;
    overflow: auto; /* Changed from overflow-y: auto to allow both horizontal and vertical scrolling if needed */
}

/* -------------------------------------------------------------------------------------- */

/* Web Search Specific Styles within Search Tab */
#search-view-web-search {
    /* Overriding the generic .search-view-area Static centering if needed */
    /* For direct children like Input, Button, VerticalScroll, default layout (vertical) should be fine. */
    padding: 1; /* Add some padding inside the web search view area */
}

#search-view-web-search > Input#web-search-input { /* Target Input directly inside */
    margin-bottom: 1; /* Space below the input field */
    width: 100%;
}

/* .search-action-button is used by #web-search-button */
.search-action-button {
    width: 100%;
    margin-bottom: 1; /* Space below the button */
    /* height: 3; /* Optional: Standard button height */
}

#search-view-web-search > VerticalScroll > Markdown#web-search-results { /* Target Markdown inside VS */
    width: 100%; /* Take full width */
    height: 1fr; /* Take remaining vertical space within its parent VerticalScroll */
    border: round $primary-background-lighten-2;
    padding: 1;
    background: $surface; /* A slightly different background for the results area */
}

/* Embeddings Creation View Styles */
#search-view-embeddings-creation {
    padding: 1;
}

.search-form-container {
    width: 100%;
    margin: 0 0;
}

.search-view-title {
    text-style: bold;
    text-align: center;
    background: blue 30%;
    color: $text;
    padding: 1;
    margin-bottom: 2;
    border: round $accent-darken-1;
}

.search-section-title {
    text-style: bold;
    margin-top: 2;
    margin-bottom: 1;
    background: $primary-background-lighten-1;
    padding: 0 1;
    border-left: thick $accent;
}

.search-form-row {
    margin-bottom: 1;
    height: 3;
    align: left middle;
}

.search-form-label {
    width: 30%;
    padding-right: 1;
    text-align: right;
}

/* Embeddings Management View Styles */
#search-view-embeddings-management {
    padding: 1;
}

.search-management-left-pane {
    width: 45%;
    padding-right: 1;
    border-right: solid $background-darken-1;
}

.search-management-right-pane {
    width: 55%;
    padding-left: 1;
}

.search-button-row {
    margin-top: 2;
    align-horizontal: center;
}

.search-button-row Button {
    margin: 0 1;
}

/* Status output styling */
#creation-status-output, #mgmt-status-output {
    margin-top: 2;
    border: round $primary-background-lighten-2;
    padding: 1;
    background: $surface;
}

/* --- End of Search Tab --- */
/* ----------------------------- ************************* ----------------------------- */

/* Enhanced SearchRAGWindow Styles */
.rag-search-container {
    height: 100%;
    width: 100%;
    padding: 0;
    background: $background;
}

/* Header Section */
.search-header-section {
    background: $primary-darken-2;
    padding: 2 3 1 3;
    margin-bottom: 2;
    border-bottom: solid $primary-background;
}

.rag-title-enhanced {
    text-align: center;
    text-style: bold;
    color: $primary;
    /* font-size: 18; - not supported in TCSS */
    margin-bottom: 1;
}

.rag-subtitle {
    text-align: center;
    color: $text-muted;
    text-style: italic;
}

/* Search Section */
.search-section {
    background: $surface;
    padding: 2;
    margin: 0 2 2 2;
    border: round $primary-background;
}

.search-input-wrapper {
    /* position: relative; - not supported in TCSS */
}

.search-bar-enhanced {
    layout: horizontal;
    height: 4;
    background: $background;
    border: thick $primary;
    /* border-radius: 2; - not supported in TCSS */
    padding: 0 1;
    align: center middle;
}

.search-input-enhanced {
    width: 1fr;
    background: transparent;
    border: none;
    padding: 0 1;
    /* font-size: 14; - not supported in TCSS */
}

.search-input-enhanced:focus {
    background: transparent;
}

.clear-button {
    width: 3;
    min-width: 3;
    height: 3;
    background: transparent;
    border: none;
    color: $text-muted;
    margin: 0;
}

.clear-button:hover {
    color: $error;
    background: $error 20%;
}

.search-button-enhanced {
    min-width: 10;
    height: 3;
    margin-left: 1;
    background: $primary;
    color: $text;
    border: none;
}

.search-button-enhanced:hover {
    background: $primary-lighten-1;
}

.search-loading-indicator {
    /* position: absolute; - not supported in TCSS */
    /* top: 1; - not supported in TCSS */
    /* right: 12; - not supported in TCSS */
    width: 2;
    height: 2;
}

/* Settings Section */
.settings-section {
    margin: 0 2;
}

.quick-settings-container {
    background: $surface;
    padding: 2;
    margin-bottom: 1;
    border: round $primary-background;
}

.settings-title {
    text-style: bold;
    color: $primary;
    margin-bottom: 2;
    text-align: center;
}

.settings-grid {
    layout: horizontal;
    /* gap: 3; - not supported in TCSS */
}

.setting-group {
    width: 1fr;
}

.setting-label {
    color: $text-muted;
    margin-bottom: 1;
    /* font-size: 12; - not supported in TCSS */
}

.mode-select {
    width: 100%;
    background: $background;
    border: solid $primary-background;
}

.source-checkboxes-enhanced {
    layout: horizontal;
    /* gap: 2; - not supported in TCSS */
    background: $background;
    padding: 1;
    border: round $primary-background;
}

.source-checkbox {
    margin: 0;
}

/* Saved Searches Panel */
.saved-searches-panel-enhanced {
    background: $boost;
    padding: 2;
    margin-bottom: 2;
    border: round $primary-background;
}

.saved-searches-wrapper {
    width: 100%;
}

.saved-searches-header {
    layout: horizontal;
    margin-bottom: 1;
    align: center middle;
}

.saved-searches-title {
    width: 1fr;
    text-style: bold;
    color: $secondary;
}

.new-search-button {
    width: 3;
    height: 3;
    min-width: 3;
    background: $primary;
    color: $text;
    border: round $primary;
}

.saved-searches-list-enhanced {
    height: 5;
    border: round $background;
    background: $background;
    margin-bottom: 1;
}

.empty-saved-searches {
    text-align: center;
    color: $text-muted;
    padding: 2;
    text-style: italic;
}

.saved-search-actions-enhanced {
    layout: horizontal;
    /* gap: 1; - not supported in TCSS */
}

.saved-action-button {
    width: 1fr;
    min-width: 8;
}

.saved-action-button.danger {
    background: $error-darken-1;
    color: $text;
}

.saved-action-button.danger:hover {
    background: $error;
}

/* Advanced Settings */
.advanced-collapsible {
    margin-bottom: 2;
}

.advanced-collapsible > .collapsible--header {
    background: $surface;
    padding: 1 2;
    border: round $primary-background;
}

.advanced-settings-wrapper {
    background: $surface;
    padding: 2;
    border: round $primary-background;
    border-top: none;
}

.advanced-section {
    margin-bottom: 2;
    padding-bottom: 2;
    border-bottom: dashed $primary-background;
}

.advanced-section:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.advanced-section-title {
    text-style: bold;
    color: $secondary;
    margin-bottom: 1;
}

.parameter-grid-enhanced {
    layout: horizontal;
    /* gap: 2; - not supported in TCSS */
}

.param-group {
    width: 1fr;
}

.param-label {
    color: $text-muted;
    margin-bottom: 0;
    /* font-size: 12; - not supported in TCSS */
}

.param-input {
    width: 100%;
    margin-top: 0;
    background: $background;
    border: solid $primary-background;
}

.rerank-checkbox {
    margin: 1 0;
}

.chunking-section {
    margin-top: 1;
}

/* Status Container */
.status-container-enhanced {
    background: $boost;
    padding: 1 2;
    margin: 0 2 2 2;
    border: round $primary-background;
}

.status-bar {
    layout: horizontal;
    align: center middle;
}

.search-status-enhanced {
    width: 1fr;
    color: $text;
    text-style: bold;
}

.search-stats {
    color: $text-muted;
    /* font-size: 12; - not supported in TCSS */
}

.search-progress-bar {
    margin-top: 1;
    height: 1;
    background: $background;
    border: solid $primary-background;
}

/* Results Section */
.results-section {
    margin: 0 2 2 2;
    height: 1fr;
}

.results-title {
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
    padding: 1;
    background: $surface;
    border: round $primary-background;
    text-align: center;
}

.results-tabs-enhanced {
    height: 100%;
    background: $surface;
    border: round $primary-background;
}

.results-tabs-enhanced TabPane {
    padding: 1;
}

.results-header {
    background: $boost;
    padding: 1;
    margin-bottom: 1;
    border: round $primary-background;
}

.results-header-bar {
    layout: horizontal;
    align: center middle;
}

.results-summary-enhanced {
    width: 1fr;
    color: $text;
}

.pagination-controls-enhanced {
    layout: horizontal;
    /* gap: 1; - not supported in TCSS */
    align: center middle;
}

.page-button {
    width: 3;
    min-width: 3;
    height: 3;
    background: $panel;
    border: solid $primary-background;
}

.page-button:hover {
    background: $primary;
    color: $text;
}

.page-button:disabled {
    opacity: 0.6;
    background: $panel-darken-2;
    color: $text-muted;
}

.page-info-enhanced {
    min-width: 10;
    text-align: center;
    color: $text-muted;
}

.results-container-enhanced {
    height: 1fr;
    background: $background;
    padding: 1;
}

/* Search Result Cards */
.search-result-card-enhanced {
    margin-bottom: 1;
    background: $panel;
    border: solid $primary-background;
    transition: all 0.2s;
}

.search-result-card-enhanced:hover {
    background: $panel-lighten-1;
    border: solid $primary;
    /* box-shadow: 0 2 4 $primary 30%; - not supported */
}

.search-result-card-enhanced.expanded {
    background: $boost;
    border: thick $primary;
}

.result-card-wrapper {
    layout: horizontal;
    padding: 1;
    /* gap: 1; - not supported in TCSS */
}

.result-source-column {
    width: 5;
    align: center middle;
    padding: 1;
    background: $background-darken-1;
    /* border-radius: 1; - not supported in TCSS */
}

.source-icon {
    /* font-size: 20; - not supported in TCSS */
    margin-bottom: 0;
}

.source-label {
    /* font-size: 10; - not supported in TCSS */
    text-style: bold;
    margin-top: 0;
}

.source-media { color: $primary; }
.source-conversation { color: $success; }
.source-note { color: $warning; }

.result-content-column {
    width: 1fr;
    padding: 0 1;
}

.result-header-enhanced {
    layout: horizontal;
    margin-bottom: 1;
    align: center middle;
}

.result-title-enhanced {
    width: 1fr;
    color: $text;
    /* font-size: 14; - not supported in TCSS */
}

.score-indicator {
    min-width: 5;
    height: 2;
    padding: 0 1;
    /* border-radius: 1; - not supported in TCSS */
    align: center middle;
}

.score-text {
    /* font-size: 11; - not supported in TCSS */
    text-align: center;
}

.score-high {
    background: $success;
    color: $text;
}

.score-medium {
    background: $warning;
    color: $text;
}

.score-low {
    background: $error-darken-1;
    color: $text;
}

.result-preview-enhanced {
    color: $text-muted;
    margin-bottom: 1;
    /* line-height: 1.4; - not supported in TCSS */
}

.metadata-pills {
    layout: horizontal;
    /* gap: 1; - not supported in TCSS */
    margin-bottom: 1;
    /* flex-wrap: wrap; - not supported in TCSS */
}

.metadata-pill {
    background: $background;
    padding: 0 1;
    border: solid $primary-background;
    /* border-radius: 1; - not supported in TCSS */
    /* font-size: 11; - not supported in TCSS */
    color: $text-muted;
}

.metadata-pill.more {
    background: $primary-darken-2;
    color: $primary;
}

.result-expanded-content {
    margin-top: 1;
    padding: 1;
    background: $background;
    border: round $primary-background;
}

.expanded-section-title {
    color: $secondary;
    margin: 1 0;
}

.result-full-content {
    color: $text;
    margin-bottom: 1;
    max-height: 20;
    overflow-y: auto;
}

.metadata-full-item {
    color: $text-muted;
    margin-left: 1;
}

.result-actions-enhanced {
    layout: horizontal;
    /* gap: 1; - not supported in TCSS */
    margin-top: 1;
}

.result-button {
    min-width: 8;
    height: 3;
    background: $background;
    border: solid $primary-background;
    /* font-size: 12; - not supported in TCSS */
}

.result-button:hover {
    background: $primary;
    color: $text;
}

.view-button {
    background: $primary-darken-1;
    color: $text;
}

/* Context and Analytics */
.context-preview-enhanced {
    padding: 2;
    background: $background;
    border: round $primary-background;
    max-height: 30;
    overflow-y: auto;
}

.history-table-enhanced {
    width: 100%;
    height: 100%;
}

.analytics-content-enhanced {
    padding: 2;
}

/* Action Buttons */
.actions-section {
    margin: 0 2 2 2;
}

.action-buttons-bar-enhanced {
    layout: horizontal;
    background: $surface;
    padding: 2;
    border: round $primary-background;
    align: center middle;
}

.primary-actions {
    layout: horizontal;
    /* gap: 1; - not supported in TCSS */
}

.action-spacer {
    width: 1fr;
}

.maintenance-actions {
    /* position: relative; - not supported in TCSS */
}

.action-button {
    min-width: 12;
    height: 3;
    border: solid $primary-background;
}

.save-button {
    background: $success-darken-1;
    color: $text;
}

.save-button:hover {
    background: $success;
}

.export-button {
    background: $primary-darken-1;
    color: $text;
}

.export-button:hover {
    background: $primary;
}

.export-button:disabled {
    opacity: 0.6;
    background: $panel-darken-2;
}

.maintenance-button {
    background: $panel;
    color: $text-muted;
}

.maintenance-button:hover {
    background: $panel-lighten-1;
    color: $text;
}

.maintenance-menu {
    /* position: absolute; - not supported in TCSS */
    /* bottom: 4; - not supported in TCSS */
    /* right: 0; - not supported in TCSS */
    background: $surface;
    border: solid $primary;
    padding: 1;
    min-width: 15;
    /* z-index: 100; - not supported */
}

.menu-item {
    width: 100%;
    margin-bottom: 1;
    background: $panel;
    border: none;
    text-align: left;
}

.menu-item:hover {
    background: $primary;
    color: $text;
}

.menu-item:last-child {
    margin-bottom: 0;
}

/* Empty States */
.empty-results-message {
    text-align: center;
    color: $text-muted;
    padding: 4;
    text-style: italic;
    background: $surface;
    border: dashed $primary-background;
    margin: 2;
}

/* Ensure SearchRAGWindow fills its container */
#search-view-rag-qa {
    height: 100%;
    width: 100%;
    display: block;
    overflow: hidden;
}

/* --- Enhanced Evaluation System Styles --- */

/* Evaluation main container */
.evals-nav-pane {
    width: 25%;
    background: $surface;
    border-right: solid $primary;
    padding: 1;
}

.evals-nav-pane.collapsed {
    width: 5%;
}

.evals-content-pane {
    width: 1fr;
    padding: 1 2;
    background: $background;
}

.evals-view-area {
    height: 100%;
    overflow-y: auto;
}

/* Section containers */
.section-container {
    margin-bottom: 2;
    padding: 1;
    background: $surface;
    border: round $primary-background;
}

.section-title {
    text-style: bold;
    color: $secondary;
    margin-bottom: 1;
}

.subsection-title {
    color: $text-muted;
    margin-bottom: 1;
    margin-top: 1;
    text-style: italic;
}

/* Button styles */
.action-button {
    margin-right: 1;
    margin-bottom: 1;
}

.action-button.primary {
    background: $primary;
    color: $text;
}

.template-button {
    margin-right: 1;
    margin-bottom: 1;
    min-width: 12;
}

.provider-button {
    margin-right: 1;
    margin-bottom: 1;
    min-width: 10;
}

/* Status and display styles */
.status-text {
    color: $text-muted;
    margin-top: 1;
    text-style: italic;
}

.results-container {
    background: $panel;
    padding: 1;
    border: round $primary-background;
    min-height: 5;
    overflow-y: auto;
}

.models-container {
    background: $panel;
    padding: 1;
    border: round $primary-background;
    min-height: 5;
    overflow-y: auto;
}

.datasets-container {
    background: $panel;
    padding: 1;
    border: round $primary-background;
    min-height: 5;
    overflow-y: auto;
}

/* Progress tracker styles */
.progress-status {
    text-align: center;
    margin-bottom: 1;
    color: $secondary;
}

.progress-details {
    layout: horizontal;
    margin: 1 0;
}

.progress-detail {
    width: 1fr;
    text-align: center;
    color: $text-muted;
}

.progress-actions {
    layout: horizontal;
    margin-top: 1;
}

.progress-actions Button {
    margin-right: 1;
}

/* Metrics display styles */
.metrics-title {
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
}

.metrics-content {
    background: $panel;
    padding: 1;
    border: round $primary-background;
    min-height: 8;
    overflow-y: auto;
    /* font-family: monospace; - not supported in TCSS */
}

/* Dialog styles */
.config-dialog {
    background: $surface;
    border: thick $primary;
    padding: 2;
    width: 80%;
    max-width: 60;
    height: auto;
    max-height: 80%;
}

.config-dialog.large {
    width: 90%;
    max-width: 80;
}

.dialog-title {
    text-style: bold;
    color: $primary;
    text-align: center;
    margin-bottom: 2;
}

.config-grid {
    layout: grid;
    grid-size: 2;
    grid-gutter: 1 2;
    margin-bottom: 2;
}

.advanced-grid {
    layout: grid;
    grid-size: 2;
    grid-gutter: 1 2;
    margin: 1 0;
}

.dialog-buttons {
    layout: horizontal;
    margin-top: 2;
}

.dialog-buttons Button {
    margin-right: 1;
}

/* File picker styles */
.file-picker-dialog {
    background: $surface;
    border: thick $primary;
    padding: 2;
    width: 90%;
    height: 80%;
}

.quick-picker {
    layout: horizontal;
    margin-bottom: 1;
}

.picker-label {
    width: 20%;
    margin-right: 1;
}

.file-display {
    width: 1fr;
    background: $panel;
    padding: 0 1;
    margin-right: 1;
    color: $text-muted;
}

.file-display.file-selected {
    color: $text;
    background: $boost;
}

.browse-button {
    min-width: 10;
}

/* Template selector styles */
.template-selector-dialog {
    background: $surface;
    border: thick $primary;
    padding: 2;
    width: 95%;
    height: 90%;
}

.template-content {
    layout: horizontal;
    height: 1fr;
    margin: 1 0;
}

.template-list-container {
    width: 60%;
    margin-right: 2;
}

.template-preview-container {
    width: 40%;
}

.template-description {
    background: $panel;
    padding: 1;
    border: round $primary-background;
    min-height: 10;
    overflow-y: auto;
}

.config-display {
    background: $panel;
    padding: 1;
    border: round $primary-background;
    min-height: 5;
    overflow-y: auto;
    /* font-family: monospace; - not supported in TCSS */
}

.preview-actions {
    layout: horizontal;
    margin-top: 1;
}

.preview-actions Button {
    margin-right: 1;
}

/* Quick template selector */
.quick-template-buttons {
    layout: horizontal;
    /* flex-wrap: wrap; - not supported in TCSS */
}

.template-quick-button {
    margin-right: 1;
    margin-bottom: 1;
    min-width: 12;
}

.more-templates-button {
    margin-right: 1;
    margin-bottom: 1;
    min-width: 15;
    background: $boost;
}

/* Results table styles */
.table-title {
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
}

.table-controls {
    layout: horizontal;
    margin-bottom: 1;
}

.table-control {
    margin-right: 1;
}

/* Summary styles */
.summary-title {
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
}

.summary-grid {
    layout: grid;
    grid-size: 2;
    grid-gutter: 1 2;
    margin-bottom: 1;
}

.summary-value {
    color: $text;
    background: $panel;
    padding: 0 1;
}

/* Comparison styles */
.comparison-title {
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
}

.comparison-controls {
    layout: horizontal;
    margin-bottom: 1;
}

.comparison-content {
    background: $panel;
    padding: 1;
    border: round $primary-background;
    min-height: 10;
    overflow-y: auto;
    /* font-family: monospace; - not supported in TCSS */
}

/* --- End Enhanced Evaluation System Styles ---*/

/* --- Enhanced RAG Search UI Styles --- */

/* Search History Dropdown */
.search-history-dropdown {
    /* position: absolute; - not supported in TCSS */
    width: 100%;
    max-height: 15;
    background: $surface;
    border: solid $primary;
    border-top: none;
    margin-top: -1;
    /* z-index: 100; - not supported in TCSS */
}

.search-history-dropdown.hidden {
    display: none;
}

.search-history-list {
    max-height: 15;
    overflow-y: auto;
    background: $background;
}

.history-item-text {
    padding: 1;
    border-bottom: dashed $primary-background;
}

.history-item-text:hover {
    background: $boost;
    color: $primary;
}










/* --- End Enhanced RAG Search UI Styles ---*/

/* --- Core Settings Styles --- */
.core-settings-container {
    padding: 1 2;
    width: 100%;
    height: 100%;
}

.section-title {
    text-style: bold;
    text-align: center;
    margin-bottom: 2;
    color: $primary;
}

.subsection-title {
    text-style: bold;
    margin: 2 0 1 0;
    color: $secondary;
}

.settings-group {
    background: $surface;
    padding: 1;
    margin-bottom: 2;
    border: round $primary-background;
}

.settings-label {
    margin: 1 0 0 0;
    color: $text-muted;
}

.settings-input {
    width: 100%;
    margin: 0 0 1 0;
}

.settings-select {
    width: 100%;
    margin: 0 0 1 0;
}

.checkbox-group {
    layout: horizontal;
    margin: 0 0 1 0;
}

.checkbox-group Checkbox {
    margin-right: 2;
}

.settings-actions {
    layout: horizontal;
    margin-top: 2;
    align: center middle;
}

.settings-actions Button {
    margin: 0 1;
    min-width: 15;
}

/* --- End Core Settings Styles ---*/

/* ----------------------------- ************************* ----------------------------- */
/* --- Evaluation Window Styles --- */

/* Evaluation navigation pane */
.evals-nav-pane {
    dock: left;
    width: 22%;
    min-width: 18;
    max-width: 30;
    background: $boost;
    padding: 1 2;
    border-right: thick $background-darken-1;
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
}

.evals-nav-pane.collapsed {
    width: 0 !important;
    min-width: 0 !important;
    border-right: none !important;
    padding: 0 !important;
    overflow: hidden !important;
    display: none;
}

/* Evaluation content pane */
.evals-content-pane {
    layout: vertical;
    height: 100%;
    width: 1fr;
    padding: 2;
    overflow-y: auto;
}

/* Navigation buttons */
.evals-nav-button {
    width: 100%;
    height: 3;
    margin-bottom: 1;
    text-align: left;
    border: none;
    background: $panel;
    color: $text-muted;
}

.evals-nav-button:hover {
    background: $panel-lighten-1;
    color: $text;
}

.evals-nav-button.active {
    background: $accent;
    color: $text;
    text-style: bold;
    border-left: thick $primary;
}

/* View areas */
.evals-view-area {
    layout: vertical;
    height: 100%;
    width: 100%;
    display: none; /* Hidden by default */
}

/* Section containers */
.section-container {
    background: $surface;
    padding: 2;
    margin-bottom: 2;
    border: round $primary-background;
    width: 100%;
}

.section-title {
    text-style: bold underline;
    margin-bottom: 2;
    color: $primary;
    text-align: center;
}

.subsection-title {
    text-style: bold;
    margin: 1 0;
    color: $secondary;
}

/* Button styling */
.action-button {
    height: 3;
    margin: 0 1 1 0;
    min-width: 15;
    background: $panel;
    border: round $primary-background;
}

.action-button:hover {
    background: $panel-lighten-1;
}

.action-button.primary {
    background: $primary;
    color: $text;
    text-style: bold;
}

.action-button.primary:hover {
    background: $primary-lighten-1;
}

.action-button.danger {
    background: $error;
    color: $text;
    text-style: bold;
}

.action-button.danger:hover {
    background: $error-lighten-1;
}

/* Button rows and grids */
.button-row {
    layout: horizontal;
    height: auto;
    margin-bottom: 2;
}

.button-row Button {
    margin-right: 1;
}

.provider-grid {
    layout: horizontal;
    height: auto;
    margin: 1 0;
}

.provider-button {
    width: 1fr;
    height: 4;
    margin: 0 1 1 0;
    background: $panel;
    border: round $primary-background;
    text-align: center;
}

.provider-button:hover {
    background: $primary-lighten-2;
    color: $text;
}

/* Status and display elements */
.status-text {
    margin: 1 0;
    padding: 1;
    background: $background-lighten-1;
    border: round $primary-background;
    color: $text-muted;
    min-height: 2;
}

.status-text.success {
    background: $success-darken-2;
    color: $text;
}

.status-text.warning {
    background: $warning-darken-2;
    color: $text;
}

.status-text.error {
    background: $error-darken-2;
    color: $text;
}

.status-text.info {
    background: $primary-darken-2;
    color: $text;
}

/* Results and data containers */
.results-container, .models-container, .datasets-container {
    background: $background-darken-1;
    padding: 2;
    margin: 1 0;
    border: round $primary-background;
    min-height: 8;
    max-height: 15;
    overflow-y: auto;
    /* white-space: pre-wrap; - not supported in TCSS */
}

/* Quick configuration */
.quick-config-container {
    background: $background-lighten-1;
    padding: 2;
    margin: 1 0;
    border: round $secondary;
}

.config-row {
    layout: horizontal;
    height: auto;
    margin-bottom: 1;
    align-vertical: middle;
}

.config-label {
    width: 25%;
    text-align: right;
    margin-right: 2;
    color: $text-muted;
}

.config-input {
    width: 30%;
    margin-right: 1;
}

.config-select {
    width: 45%;
}

/* Template buttons */
.template-button {
    width: 1fr;
    height: 3;
    margin: 0 1 1 0;
    background: $secondary-darken-1;
    color: $text;
    border: round $secondary;
    text-align: center;
}

.template-button:hover {
    background: $secondary;
}

/* Help and tip text */
.help-text {
    color: $text-muted;
    margin: 0 0 1 0;
    text-style: italic;
}

.tip-text {
    color: $text-muted;
    margin: 0 0 1 0;
    text-style: italic;
    text-align: center;
}

/* Footer */
.footer-container {
    background: $background-darken-1;
    padding: 1;
    margin-top: 2;
    border-top: thick $primary-background;
}

/* Progress tracking specific styles */
.progress-title {
    text-style: bold;
    text-align: center;
    margin-bottom: 1;
    color: $primary;
}

.progress-status {
    text-align: center;
    margin: 1 0;
    color: $text-muted;
}

.progress-details {
    layout: horizontal;
    height: auto;
    margin: 1 0;
    align: center middle;
}

.progress-detail {
    width: 1fr;
    text-align: center;
    margin: 0 1;
    color: $text-muted;
}

.progress-actions {
    layout: horizontal;
    height: auto;
    margin: 1 0;
    align: center middle;
}

.progress-actions Button {
    margin: 0 1;
    width: 1fr;
}

/* Metrics display */
.metrics-title {
    text-style: bold;
    text-align: center;
    margin-bottom: 1;
    color: $primary;
}

.metrics-content {
    background: $background-darken-1;
    padding: 2;
    border: round $primary-background;
    /* white-space: pre-wrap; - not supported in TCSS */
    color: $text;
}

/* Table styling */
.table-title {
    text-style: bold;
    text-align: center;
    margin-bottom: 1;
    color: $primary;
}

.table-controls {
    layout: horizontal;
    height: auto;
    margin-bottom: 1;
}

.table-control {
    margin-right: 1;
}

/* Sidebar toggle */
.sidebar-toggle {
    /* position: absolute; - not supported in TCSS */
    /* top: 1; - not supported in TCSS */
    /* left: 1; - not supported in TCSS */
    width: 3;
    height: 3;
    background: $panel;
    border: round $primary;
}

.sidebar-toggle:hover {
    background: $panel-lighten-1;
}

.sidebar-toggle.collapsed {
    /* left: 1; - not supported in TCSS */
}

/* --- End Evaluation Window Styles ---*/

/* ----------------------------- ************************* ----------------------------- */
/* --- Chat Settings Mode Styles --- */

/* Settings mode toggle container */
.settings-mode-container {
    layout: horizontal;
    height: 3;
    width: 100%;
    align: center middle;
    margin-bottom: 1;
    padding: 0 1;
}

/* Mode labels */
.mode-label {
    margin: 0 1;
    color: $text-muted;
}

/* Settings mode toggle switch */
.settings-mode-toggle {
    margin: 0 1;
}

/* Settings search input */
.settings-search-input {
    width: 100%;
    margin-bottom: 2;
    border: round $primary;
}

/* Quick settings section */
.quick-settings-section {
    padding: 1;
    border: round $surface;
    margin-bottom: 1;
}

/* RAG Settings Panel - Prominent styling */
.rag-settings-panel {
    padding: 1;
    border: round $surface;  /* Changed from $accent to match other panels */
    background: $panel;      /* Changed from $boost to standard panel background */
    margin-bottom: 1;
}

/* Highlight RAG panel when focused */
.rag-settings-panel:focus-within {
    border: round $accent;
    background: $boost;
}

/* Remove highlight when collapsed */
.rag-settings-panel.collapsed {
    border: round $surface !important;
    background: $panel !important;
}

.rag-settings-panel-advanced {
    padding: 1;
    border: round $accent;
    background: $boost;
    margin-bottom: 1;
}

/* RAG panel header with icon */
.rag-panel-header {
    text-style: bold;
    color: $accent;
    margin-bottom: 1;
    text-align: center;
}

/* RAG toggle row */
.rag-toggle-row {
    layout: horizontal;
    height: 3;
    align: left middle;
    margin-bottom: 1;
}

/* RAG main toggle */
.rag-main-toggle {
    margin-right: 2;
}

/* RAG preset select */
.rag-preset-select {
    width: 50%;
}

/* RAG scope container */
.rag-scope-container {
    padding-left: 2;
    margin-bottom: 1;
}

/* Section headers */
.section-header {
    text-style: bold underline;
    color: $primary;
    margin-bottom: 1;
    margin-top: 1;
}

.subsection-header {
    text-style: bold;
    color: $secondary;
    margin-bottom: 1;
    margin-top: 1;
}

/* Info text */
.info-text {
    color: $text-muted;
    text-style: italic;
    margin-bottom: 1;
}

/* Hidden class for mode switching */
.hidden {
    display: none;
}

/* Search highlighting */
.search-hidden {
    display: none;
}

.search-highlighted {
    background: $warning 20%;
    border: round $warning;
}

/* Settings containers for mode switching */
#chat-basic-settings-container {
    width: 100%;
}

#chat-advanced-settings-container {
    width: 100%;
}

/* --- End Chat Settings Mode Styles ---*/

/* ----------------------------- ************************* ----------------------------- */
/* --- Enhanced Chat Settings Styles --- */

/* Mode toggle container */
.mode-toggle-container {
    layout: horizontal;
    height: 3;
    width: 100%;
    align: center middle;
    margin-bottom: 1;
}

/* Mode labels */
.mode-label {
    margin: 0 1;
    color: $text-muted;
}

/* Settings mode toggle switch */
.settings-mode-toggle {
    margin: 0 1;
}

/* Settings search input */
.settings-search-input {
    width: 100%;
    margin-bottom: 2;
    border: round $primary;
}

/* RAG Settings Panel - Prominent styling */
.rag-settings-panel {
    padding: 1;
    border: round $surface;  /* Changed to match other panels */
    background: $panel;      /* Changed to standard panel background */
    margin-bottom: 1;
}

/* Remove extra padding from RAG panel content */
.rag-settings-panel Container {
    padding: 0;
    height: auto;
}

/* Highlight RAG panel when focused */
.rag-settings-panel:focus-within {
    border: round $primary-lighten-2;
    background: $boost;
}

/* Remove highlight when collapsed */
.rag-settings-panel.collapsed {
    border: round $surface !important;
    background: $panel !important;
}

/* RAG panel header with icon */
.rag-panel-header {
    text-style: bold;
    color: $accent;
    margin-bottom: 1;
    text-align: center;
}

/* RAG enable toggle */
.rag-enable-toggle {
    margin-bottom: 1;
}

/* RAG preset select */
.rag-preset-select {
    width: 100%;
    margin-bottom: 1;
}

/* RAG scope options */
.rag-scope-options {
    margin-bottom: 1;
}

.rag-scope-options Checkbox {
    margin-bottom: 0;
}

/* Ensure proper spacing for sidebar labels in RAG panel */
.rag-settings-panel .sidebar-label {
    margin-top: 0;
    margin-bottom: 0;
}

/* Advanced only sections - hidden by default in basic mode */
.advanced-only {
    display: none;
}

/* Show advanced sections when in advanced mode */
.sidebar.advanced-mode .advanced-only {
    display: block;
}

/* Hide advanced-only when in basic mode */
.sidebar.basic-mode .advanced-only {
    display: none;
}

/* Search highlighting */
.search-highlight {
    background: $warning 20%;
    border: round $warning;
}

/* --- End Enhanced Chat Settings Styles ---*/
