/* ========================================
 * FEATURES: Conversations (Refactored)
 * ======================================== 
 * Conversations, Characters, and Prompts tab
 * Single sidebar design following best practices
 * ======================================== */

/* --- Main container layout --- */
#conversations_characters_prompts-window {
    layout: horizontal;
    height: 100%;
}

/* --- Sidebar Styling (Single, unified sidebar) --- */
.ccp-sidebar {
    width: 30%;
    min-width: 25;
    max-width: 40%;
    height: 100%;
    background: $boost;
    padding: 1;
    border-right: thick $background-darken-1;
    overflow-y: auto;
    overflow-x: hidden;
}

/* Collapsed state for sidebar */
.ccp-sidebar.collapsed {
    width: 0 !important;
    min-width: 0 !important;
    border-right: none !important;
    padding: 0 !important;
    overflow: hidden !important;
    display: none !important;
}

/* Sidebar toggle button */
.ccp-sidebar-toggle-button {
    width: 3;
    height: 100%;
    min-width: 3;
    border: none;
    background: $surface-darken-1;
    color: $text;
    dock: left;
}

.ccp-sidebar-toggle-button:hover {
    background: $surface;
}

/* --- Content Area Styling --- */
.ccp-content-area {
    width: 1fr; /* Takes remaining space after sidebar */
    height: 100%;
    padding: 1;
    overflow-y: auto;
}

/* --- View Areas within Content --- */
.ccp-view-area {
    width: 100%;
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 1;
}

/* Hidden class for view switching */
.ccp-view-area.hidden {
    display: none !important;
}

.hidden {
    display: none !important;
}

/* --- Title Styling --- */
.pane-title {
    text-style: bold;
    margin-bottom: 1;
    text-align: center;
    width: 100%;
    background: $primary-background-darken-1;
    padding: 0 1;
    height: 3;
}

.sidebar-title {
    text-style: bold;
    margin-bottom: 1;
    text-align: center;
    color: $primary;
}

/* --- Sidebar Components --- */
.sidebar-label {
    margin-top: 1;
    margin-bottom: 0;
    color: $text-muted;
}

.sidebar-input {
    width: 100%;
    margin-bottom: 1;
}

.sidebar-textarea {
    width: 100%;
    height: 5;
    margin-bottom: 1;
    border: round $surface;
}

.sidebar-textarea.small {
    height: 3;
}

.sidebar-button {
    width: 100%;
    margin-bottom: 1;
    height: 3;
}

.sidebar-button.small {
    width: 45%;
    margin-right: 1;
}

.sidebar-button.danger {
    background: $error-darken-1;
}

.sidebar-button.danger:hover {
    background: $error;
}

.sidebar-listview {
    height: 10;
    margin-bottom: 1;
    border: round $surface;
}

/* Export buttons container */
.export-buttons {
    layout: horizontal;
    height: 3;
    width: 100%;
    margin-bottom: 1;
}

.export-buttons Button {
    width: 1fr;
    margin-right: 1;
}

.export-buttons Button:last-child {
    margin-right: 0;
}

/* --- Editor Styling --- */
.editor-scroll {
    width: 100%;
    height: 1fr;
    overflow-y: auto;
    padding: 1;
}

.field-label {
    margin-top: 1;
    margin-bottom: 0;
    color: $text-muted;
    text-style: bold;
}

.field-value {
    margin-bottom: 1;
    padding: 0 1;
}

.field-textarea {
    width: 100%;
    height: 8;
    margin-bottom: 1;
    border: round $surface;
}

.editor-input {
    width: 100%;
    margin-bottom: 1;
}

.editor-textarea {
    width: 100%;
    height: 10;
    margin-bottom: 1;
    border: round $surface;
}

.editor-textarea.small {
    height: 5;
}

/* AI Generation buttons */
.field-with-ai {
    layout: horizontal;
    height: auto;
    width: 100%;
    margin-bottom: 1;
}

.field-with-ai TextArea {
    width: 85%;
    margin-right: 1;
}

.ai-generate-button {
    width: 12%;
    height: 3;
    margin-top: 0;
    background: $primary;
}

.ai-generate-button:hover {
    background: $primary-lighten-1;
}

.ai-generate-button.full-width {
    width: 100%;
    margin-bottom: 1;
}

/* Image controls */
.image-controls {
    layout: horizontal;
    height: 3;
    width: 100%;
    margin-bottom: 1;
}

.image-controls Button {
    width: 1fr;
    margin-right: 1;
}

.image-controls Button:last-child {
    margin-right: 0;
}

.image-status {
    margin-bottom: 1;
    padding: 0 1;
    color: $text-muted;
}

.character-image {
    width: 100%;
    height: 15;
    border: round $surface;
    margin-bottom: 1;
    align: center middle;
    background: $surface-darken-1;
}

/* Editor action buttons */
.editor-actions {
    layout: horizontal;
    height: 3;
    width: 100%;
    margin-top: 2;
    margin-bottom: 1;
}

.editor-actions Button {
    width: 1fr;
    margin-right: 1;
}

.editor-actions Button:last-child {
    margin-right: 0;
}

.primary-button {
    background: $success;
}

.primary-button:hover {
    background: $success-lighten-1;
}

.secondary-button {
    background: $surface;
}

.secondary-button:hover {
    background: $surface-lighten-1;
}

/* Dictionary specific styles */
.dict-entries-list {
    height: 12;
    margin-bottom: 1;
    border: round $surface;
}

.dict-entry-controls {
    layout: horizontal;
    height: 3;
    width: 100%;
    margin-top: 1;
    margin-bottom: 1;
}

.dict-entry-controls Button {
    width: 1fr;
    margin-right: 1;
}

.dict-entry-controls Button:last-child {
    margin-right: 0;
}

/* Collapsible styling enhancements */
Collapsible {
    margin-bottom: 1;
}

Collapsible > .collapsible--header {
    background: $primary-background-darken-1;
    color: $text;
    padding: 0 1;
    height: 3;
}

Collapsible.-active > .collapsible--header {
    background: $primary-background;
    color: $text;
}

/* Select widget styling */
Select {
    width: 100%;
    margin-bottom: 1;
}

/* Checkbox styling */
Checkbox {
    width: 100%;
    margin-bottom: 0;
    height: 2;
}

/* ListView item styling */
ListView ListItem {
    padding: 0 1;
    height: auto;
}

ListView ListItem:hover {
    background: $primary-background-darken-1;
}

ListView ListItem.--highlight {
    background: $primary-background;
}

/* Message display area */
#ccp-conversation-messages-view {
    padding: 1;
}

/* Ensure proper scrolling */
VerticalScroll {
    scrollbar-background: $surface-darken-1;
    scrollbar-color: $primary;
    scrollbar-size: 1 1;
}

/* Note: Textual doesn't support @media queries for responsive design */
/* Width adjustments would need to be handled programmatically */

/* --- End of refactored Conversations, Characters & Prompts styles --- */