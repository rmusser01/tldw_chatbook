============================= test session starts ==============================
platform darwin -- Python 3.12.11, pytest-8.4.1, pluggy-1.6.0 -- /Users/appledev/Working/tldw_chatbook/.venv/bin/python
cachedir: .pytest_cache
rootdir: /Users/appledev/Working/tldw_chatbook
configfile: pyproject.toml
plugins: anyio-4.9.0, asyncio-1.1.0, xdist-3.8.0, timeout-2.4.0, mock-3.14.1
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
timeout: 300.0s
timeout method: thread
timeout func_only: False
collecting ... 2025-07-27 00:13:18.718 | DEBUG    | tldw_chatbook.config:<module>:30 - CRITICAL DEBUG: config.py module is being imported/executed NOW.
2025-07-27 00:13:18.718 | INFO     | tldw_chatbook.config:load_openai_mappings:308 - Attempting to load OpenAI TTS mappings from: /Users/appledev/Working/Config_Files/openai_tts_mappings.json
2025-07-27 00:13:18.718 | ERROR    | tldw_chatbook.config:load_openai_mappings:313 - Failed to load OpenAI TTS mappings from /Users/appledev/Working/Config_Files/openai_tts_mappings.json: [Errno 2] No such file or directory: '/Users/appledev/Working/Config_Files/openai_tts_mappings.json'
2025-07-27 00:13:18.723 | INFO     | tldw_chatbook.config:load_cli_config_and_ensure_existence:2499 - Attempting to load CLI config from: /Users/appledev/.config/tldw_cli/config.toml
2025-07-27 00:13:18.727 | INFO     | tldw_chatbook.config:load_cli_config_and_ensure_existence:2505 - Successfully loaded and merged CLI config from /Users/appledev/.config/tldw_cli/config.toml
2025-07-27 00:13:18.727 | DEBUG    | tldw_chatbook.config:load_cli_config_and_ensure_existence:2518 - load_cli_config_and_ensure_existence returning config with top-level keys: ['general', 'tldw_api', 'splash_screen', 'logging', 'database', 'media_cleanup', 'api_endpoints', 'providers', 'api_settings', 'chat_defaults', 'chat', 'character_defaults', 'notes', 'Prompts', 'prompts', 'embedding_config', 'rag', 'rag_search', 'model_capabilities', 'SearchEngines', 'media_processing', 'transcription', 'diarization', 'local_ingestion', 'mcp', 'subscriptions', 'USER_DB_BASE_DIR', 'filepicker', 'app_tts', 'tts_settings']
2025-07-27 00:13:18.727 | DEBUG    | tldw_chatbook.config:load_cli_config_and_ensure_existence:2520 -   'api_settings' found with keys: ['openai', 'anthropic', 'cohere', 'deepseek', 'groq', 'google', 'huggingface', 'mistralai', 'openrouter', 'moonshot', 'llama_cpp', 'oobabooga', 'koboldcpp', 'ollama', 'vllm', 'aphrodite', 'tabbyapi', 'custom', 'custom_2', 'local-llm', 'local_llamafile', 'local_llamacpp', 'local_vllm', 'local_ollama', 'local_onnx', 'local_transformers', 'local_mlx_lm']
2025-07-27 00:13:18.727 | INFO     | tldw_chatbook.config:load_settings:535 - Determined ACTUAL_PROJECT_ROOT for general paths: /Users/appledev/Working/tldw_chatbook/tldw_chatbook
2025-07-27 00:13:18.727 | INFO     | tldw_chatbook.config:load_settings:536 - Determined APP_COMPONENT_ROOT for config files: /Users/appledev/Working/tldw_chatbook/tldw_chatbook
2025-07-27 00:13:18.727 | INFO     | tldw_chatbook.config:load_settings:545 - Attempting to load primary TOML config from: /Users/appledev/Working/tldw_chatbook/tldw_chatbook/Config_Files/config.toml
2025-07-27 00:13:18.727 | WARNING  | tldw_chatbook.config:load_settings:551 - Primary TOML Config file not found at /Users/appledev/Working/tldw_chatbook/tldw_chatbook/Config_Files/config.toml. Proceeding without it.
2025-07-27 00:13:18.727 | INFO     | tldw_chatbook.config:load_settings:560 - Attempting to load user-specific CLI TOML config for overrides from: /Users/appledev/.config/tldw_cli/config.toml
2025-07-27 00:13:18.730 | INFO     | tldw_chatbook.config:load_settings:565 - Successfully loaded user-specific CLI TOML config from: /Users/appledev/.config/tldw_cli/config.toml
2025-07-27 00:13:18.731 | INFO     | tldw_chatbook.config:load_settings:580 - Merged all configurations: CLI Defaults < Primary Config < User CLI Config.
2025-07-27 00:13:18.731 | DEBUG    | tldw_chatbook.config:load_settings:581 - load_settings: Configuration loaded from disk (cache miss or forced reload)
2025-07-27 00:13:18.731 | DEBUG    | tldw_chatbook.config:load_settings:679 - No macOS-specific STT providers found, using faster-whisper as default
2025-07-27 00:13:18.743 | DEBUG    | tldw_chatbook.config:load_settings:1255 - Ensured chat dictionaries folder exists: /Users/appledev/.local/share/tldw_cli/default_user/chat_dicts
2025-07-27 00:13:18.743 | DEBUG    | tldw_chatbook.config:load_settings:1262 - load_settings: Configuration cached for future use
2025-07-27 00:13:18.743 | INFO     | tldw_chatbook.config:<module>:3210 - Default API Endpoint (from config.py global scope): openai
2025-07-27 00:13:18.743 | DEBUG    | tldw_chatbook.config:<module>:3230 - CRITICAL DEBUG: Database initialization is now lazy - will initialize on first access
collected 12 items

Tests/TTS/test_higgs_integration.py::TestHiggsIntegration::test_model_loading 2025-07-27 00:13:19.518 | INFO     | tldw_chatbook.TTS.backends.higgs:__init__:226 - Loaded 6 voice profiles from /Users/appledev/.config/tldw_cli/higgs_voices/voice_profiles.json
2025-07-27 00:13:19.518 | INFO     | tldw_chatbook.TTS.backends.higgs:__init__:249 - HiggsAudioTTSBackend initialized with device: cpu, model: bosonai/higgs-audio-v2-generation-3B-base
2025-07-27 00:13:19.520 | INFO     | tldw_chatbook.TTS.backends.higgs:load_model:272 - üìö Step 1/4: Importing Higgs Audio modules...
2025-07-27 00:13:21.759 | INFO     | tldw_chatbook.TTS.backends.higgs:load_model:283 - ‚úì Step 1/4: Higgs Audio modules imported successfully
2025-07-27 00:13:21.759 | INFO     | tldw_chatbook.TTS.backends.higgs:load_model:310 - üîç Step 2/4: Checking HiggsAudioServeEngine parameters...
2025-07-27 00:13:21.759 | INFO     | tldw_chatbook.TTS.backends.higgs:load_model:315 - ‚úì Step 2/4: Found 7 supported parameters
2025-07-27 00:13:21.759 | DEBUG    | tldw_chatbook.TTS.backends.higgs:load_model:326 - HiggsAudioServeEngine supports audio_tokenizer_name_or_path parameter
2025-07-27 00:13:21.759 | DEBUG    | tldw_chatbook.TTS.backends.higgs:load_model:335 - HiggsAudioServeEngine does not support dtype parameter, skipping
2025-07-27 00:13:21.759 | DEBUG    | tldw_chatbook.TTS.backends.higgs:load_model:342 - HiggsAudioServeEngine does not support enable_flash_attn parameter, skipping
2025-07-27 00:13:21.759 | INFO     | tldw_chatbook.TTS.backends.higgs:load_model:346 - üîÑ Step 3/4: Loading model (this may take a while on first run)...
2025-07-27 00:13:21.759 | INFO     | tldw_chatbook.TTS.backends.higgs:load_model:347 - üì• Model path: bosonai/higgs-audio-v2-generation-3B-base
2025-07-27 00:13:21.759 | INFO     | tldw_chatbook.TTS.backends.higgs:load_model:348 - üéµ Audio tokenizer: bosonai/higgs-audio-v2-tokenizer
2025-07-27 00:13:21.759 | INFO     | tldw_chatbook.TTS.backends.higgs:load_model:349 - ‚è≥ Running in background thread to keep UI responsive...
